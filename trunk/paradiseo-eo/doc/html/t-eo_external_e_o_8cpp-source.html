<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>EO: t-eoExternalEO.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<div class="nav">
<a class="el" href="dir_000002.html">test</a></div>
<h1>t-eoExternalEO.cpp</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">// to avoid long name warnings</span>
00002 <span class="preprocessor">#ifdef _MSC_VER</span>
00003 <span class="preprocessor"></span><span class="preprocessor">#pragma warning(disable:4786)</span>
00004 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00005 <span class="preprocessor"></span>
00006 <span class="preprocessor">#include &lt;iostream&gt;</span>
00007 <span class="preprocessor">#include &lt;stdexcept&gt;</span>  <span class="comment">// runtime_error </span>
00008 
00009 <span class="preprocessor">#include &lt;eoEvalFuncPtr.h&gt;</span>
00010 <span class="preprocessor">#include &lt;other/external_eo&gt;</span>
00011 <span class="preprocessor">#include &lt;utils/eoRNG.h&gt;</span>
00012 
00013 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00014 
00015 <span class="keyword">struct </span>UserDefStruct
00016 {
00017     <span class="keywordtype">int</span> a;
00018     <span class="keywordtype">float</span> b;
00019     <span class="keywordtype">double</span> c;
00020     <span class="keyword">enum</span> Enum { just, another, test } d;
00021 };
00022 
00023 std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, <span class="keyword">const</span> UserDefStruct&amp; str)
00024 {
00025     <span class="keywordflow">return</span> os &lt;&lt; str.a &lt;&lt; <span class="charliteral">' '</span> &lt;&lt; str.b &lt;&lt; <span class="charliteral">' '</span> &lt;&lt; str.c &lt;&lt; <span class="charliteral">' '</span> &lt;&lt; static_cast&lt;int&gt;(str.d) &lt;&lt; <span class="charliteral">' '</span>;
00026 }
00027 
00028 istream&amp; operator&gt;&gt;(istream&amp; is, UserDefStruct&amp; str)
00029 {
00030     is &gt;&gt; str.a;
00031     is &gt;&gt; str.b;
00032     is &gt;&gt; str.c;
00033     <span class="keywordtype">int</span> i;
00034     is &gt;&gt; i;
00035     str.d = static_cast&lt;UserDefStruct::Enum&gt;(i);
00036 
00037     <span class="keywordflow">return</span> is;
00038 }
00039 
00040 
00041 UserDefStruct RandomStruct()
00042 {
00043     std::cout &lt;&lt; <span class="stringliteral">"RandomStruct\n"</span>;
00044 
00045     UserDefStruct result;
00046 
00047     result.a = rng.<a class="code" href="classeo_rng.html#a5">random</a>(5);
00048     result.b = rng.<a class="code" href="classeo_rng.html#a4">uniform</a>();
00049     result.c = rng.<a class="code" href="classeo_rng.html#a4">uniform</a>();
00050     result.d = UserDefStruct::another;
00051 
00052     <span class="keywordflow">return</span> result;
00053 }
00054 
00055 <span class="comment">// reading and writing</span>
00056 
00057 
00058 <span class="keywordtype">bool</span> UserDefMutate(UserDefStruct&amp; a)
00059 {
00060     std::cout &lt;&lt; <span class="stringliteral">"UserDefMutate\n"</span>;
00061     a = RandomStruct(); <span class="comment">// just for testing</span>
00062 
00063     <span class="keywordflow">if</span> (rng.<a class="code" href="classeo_rng.html#a6">flip</a>(0.1f))
00064         a.d = UserDefStruct::test;
00065     <span class="keywordflow">else</span>
00066         a.d = UserDefStruct::another;
00067     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00068 }
00069 
00070 <span class="keywordtype">bool</span> UserDefBinCrossover(UserDefStruct&amp; a, <span class="keyword">const</span> UserDefStruct&amp; b)
00071 {
00072     std::cout &lt;&lt; <span class="stringliteral">"UserDefBinCrossover\n"</span>;
00073 
00074     <span class="keywordflow">if</span> (rng.<a class="code" href="classeo_rng.html#a6">flip</a>(0.5))
00075         a.a = b.a;
00076     <span class="keywordflow">if</span> (rng.<a class="code" href="classeo_rng.html#a6">flip</a>(0.5))
00077         a.b = b.b;
00078     <span class="keywordflow">if</span> (rng.<a class="code" href="classeo_rng.html#a6">flip</a>(0.5))
00079         a.c = b.c;
00080     <span class="keywordflow">if</span> (rng.<a class="code" href="classeo_rng.html#a6">flip</a>(0.5))
00081         a.d = b.d;
00082     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00083 }
00084 
00085 <span class="keywordtype">bool</span> UserDefQuadCrossover(UserDefStruct&amp; a, UserDefStruct&amp; b)
00086 {
00087     std::cout &lt;&lt; <span class="stringliteral">"UserDefQuadCrossover\n"</span>;
00088     <span class="keywordflow">if</span> (rng.<a class="code" href="classeo_rng.html#a6">flip</a>(0.5))
00089         swap(a.a, b.a);
00090     <span class="keywordflow">if</span> (rng.<a class="code" href="classeo_rng.html#a6">flip</a>(0.5))
00091         swap(a.b, b.b);
00092     <span class="keywordflow">if</span> (rng.<a class="code" href="classeo_rng.html#a6">flip</a>(0.5))
00093         swap(a.c, b.c);
00094     <span class="keywordflow">if</span> (rng.<a class="code" href="classeo_rng.html#a6">flip</a>(0.5))
00095         swap(a.d, b.d);
00096 
00097     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00098 }
00099 
00100 <span class="keywordtype">float</span> UserDefEvalFunc(<span class="keyword">const</span> UserDefStruct&amp; a)
00101 {
00102     std::cout &lt;&lt; <span class="stringliteral">"UserDefEvalFunc\n"</span>;
00103     <span class="keywordflow">return</span> a.b;
00104 }
00105 
00106 <span class="keywordtype">int</span> main()
00107 {
00108     <span class="keyword">typedef</span> UserDefStruct External;
00109     <span class="keyword">typedef</span> <span class="keywordtype">float</span> <a class="code" href="classeo_pareto_fitness.html">FitnessType</a>;
00110     <span class="keyword">typedef</span> <a class="code" href="classeo_external_e_o.html">eoExternalEO&lt;float, External&gt;</a> <a class="code" href="classeo_parse_tree.html">EoType</a>;
00111 
00112     <a class="code" href="classeo_external_init.html">eoExternalInit&lt;FitnessType, External&gt;</a> init(RandomStruct);
00113     <a class="code" href="classeo_external_mon_op.html">eoExternalMonOp&lt;FitnessType, External&gt;</a> mutate(UserDefMutate);
00114     <a class="code" href="classeo_external_bin_op.html">eoExternalBinOp&lt;FitnessType, External&gt;</a> cross1(UserDefBinCrossover);
00115     <a class="code" href="classeo_external_quad_op.html">eoExternalQuadOp&lt;FitnessType, External&gt;</a> cross2(UserDefQuadCrossover);
00116 
00117     <span class="comment">// eoExternalEvalFunc&lt;FitnessType, External&gt;   eval(UserDefEvalFunc);</span>
00118 
00119     EoType eo1;
00120     init(eo1);
00121     EoType eo2;
00122     init(eo2);
00123 
00124     std::cout &lt;&lt; <span class="stringliteral">"before mutation "</span> &lt;&lt; eo1 &lt;&lt; <span class="charliteral">'\n'</span>;
00125     mutate(eo1);
00126     std::cout &lt;&lt; <span class="stringliteral">"after mutation "</span> &lt;&lt; eo1 &lt;&lt; <span class="charliteral">'\n'</span>;
00127     cross1(eo1, eo2);
00128     std::cout &lt;&lt; <span class="stringliteral">"after crossover "</span> &lt;&lt; eo1 &lt;&lt; <span class="charliteral">'\n'</span>;
00129 
00130     cross2(eo1,eo2);
00131 
00132 };
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Oct 19 05:06:43 2006 for EO by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
