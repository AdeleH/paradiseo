<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>EO: MyStructEA.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<div class="nav">
<a class="el" href="dir_000003.html">tutorial</a>&nbsp;/&nbsp;<a class="el" href="dir_000026.html">Templates</a></div>
<h1>MyStructEA.cpp</h1><div class="fragment"><pre class="fragment">00001 
00006 <span class="comment">/*</span>
00007 <span class="comment">Template for creating a new representation in EO</span>
00008 <span class="comment">================================================</span>
00009 <span class="comment"></span>
00010 <span class="comment">This is the template main file.</span>
00011 <span class="comment">It includes all other files that have been generated by the script create.sh</span>
00012 <span class="comment">so it is the only file to compile.</span>
00013 <span class="comment"></span>
00014 <span class="comment">In case you want to build up a separate library for your new Evolving Object,</span>
00015 <span class="comment">you'll need some work - follow what's done in the src/ga dir, used in the</span>
00016 <span class="comment">main file BitEA in tutorial/Lesson4 dir.</span>
00017 <span class="comment">Or you can wait until we do it :-)</span>
00018 <span class="comment">*/</span>
00019 
00020 <span class="comment">// Miscilaneous include and declaration </span>
00021 <span class="preprocessor">#include &lt;iostream&gt;</span>
00022 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00023 
00024 <span class="comment">// eo general include</span>
00025 <span class="preprocessor">#include "eo"</span>
00026 <span class="comment">// the real bounds (not yet in general eo include)</span>
00027 <span class="preprocessor">#include "utils/eoRealVectorBounds.h"</span>
00028 
00029 <span class="comment">// include here whatever specific files for your representation</span>
00030 <span class="comment">// Basically, this should include at least the following</span>
00031 
00035 <span class="preprocessor">#include "eoMyStruct.h"</span>
00036 
00040 <span class="preprocessor">#include "eoMyStructInit.h"</span>
00041 
00047 <span class="preprocessor">#include "eoMyStructEvalFunc.h"</span>
00048 
00049 <span class="comment">// GENOTYPE   eoMyStruct ***MUST*** be templatized over the fitness</span>
00050 
00051 <span class="comment">//*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*</span>
00052 <span class="comment">// START fitness type: double or eoMaximizingFitness if you are maximizing</span>
00053 <span class="comment">//                     eoMinimizingFitness if you are minimizing</span>
00054 <span class="keyword">typedef</span> <a class="code" href="classeo_scalar_fitness.html">eoMinimizingFitness</a> <a class="code" href="classeo_scalar_fitness.html">MyFitT</a> ;    <span class="comment">// type of fitness </span>
00055 <span class="comment">// END fitness type</span>
00056 <span class="comment">//*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*</span>
00057 
00058 <span class="comment">// Then define your EO objects using that fitness type</span>
00059 <span class="keyword">typedef</span> eoMyStruct&lt;MyFitT&gt; <a class="code" href="classeo_real.html">Indi</a>;      <span class="comment">// ***MUST*** derive from EO </span>
00060 
00061 <span class="comment">// create an initializer</span>
00062 <span class="preprocessor">#include "make_genotype_MyStruct.h"</span>
00063 <a class="code" href="classeo_init.html">eoInit&lt;Indi&gt;</a> &amp; make_genotype(eoParser&amp; _parser, <a class="code" href="classeo_state.html">eoState</a>&amp;_state, Indi _eo)
00064 {
00065   <span class="keywordflow">return</span> do_make_genotype(_parser, _state, _eo);
00066 } 
00067 
00068 <span class="comment">// and the variation operaotrs</span>
00069 <span class="preprocessor">#include "make_op_MyStruct.h"</span>
00070 <a class="code" href="classeo_gen_op.html">eoGenOp&lt;Indi&gt;</a>&amp;  make_op(eoParser&amp; _parser, <a class="code" href="classeo_state.html">eoState</a>&amp; _state, <a class="code" href="classeo_init.html">eoInit&lt;Indi&gt;</a>&amp; _init)
00071 {
00072   <span class="keywordflow">return</span> do_make_op(_parser, _state, _init);
00073 }
00074 
00075 <span class="comment">// Use existing modules to define representation independent routines</span>
00076 <span class="comment">// These are parser-based definitions of objects</span>
00077 
00078 <span class="comment">// how to initialize the population </span>
00079 <span class="comment">// it IS representation independent if an eoInit is given</span>
00080 <span class="preprocessor">#include &lt;do/make_pop.h&gt;</span>
00081 <a class="code" href="classeo_pop.html">eoPop&lt;Indi &gt;</a>&amp;  make_pop(eoParser&amp; _parser, <a class="code" href="classeo_state.html">eoState</a>&amp; _state, <a class="code" href="classeo_init.html">eoInit&lt;Indi&gt;</a> &amp; _init)
00082 {
00083   <span class="keywordflow">return</span> do_make_pop(_parser, _state, _init);
00084 }
00085 
00086 <span class="comment">// the stopping criterion</span>
00087 <span class="preprocessor">#include &lt;do/make_continue.h&gt;</span>
00088 <a class="code" href="classeo_continue.html">eoContinue&lt;Indi&gt;</a>&amp; make_continue(eoParser&amp; _parser, <a class="code" href="classeo_state.html">eoState</a>&amp; _state, <a class="code" href="classeo_eval_func_counter.html">eoEvalFuncCounter&lt;Indi&gt;</a> &amp; _eval)
00089 {
00090   <span class="keywordflow">return</span> do_make_continue(_parser, _state, _eval);
00091 }
00092 
00093 <span class="comment">// outputs (stats, population dumps, ...)</span>
00094 <span class="preprocessor">#include &lt;do/make_checkpoint.h&gt;</span>
00095 <a class="code" href="classeo_check_point.html">eoCheckPoint&lt;Indi&gt;</a>&amp; make_checkpoint(eoParser&amp; _parser, <a class="code" href="classeo_state.html">eoState</a>&amp; _state, <a class="code" href="classeo_eval_func_counter.html">eoEvalFuncCounter&lt;Indi&gt;</a>&amp; _eval, <a class="code" href="classeo_continue.html">eoContinue&lt;Indi&gt;</a>&amp; _continue) 
00096 {
00097   <span class="keywordflow">return</span> do_make_checkpoint(_parser, _state, _eval, _continue);
00098 }
00099 
00100 <span class="comment">// evolution engine (selection and replacement)</span>
00101 <span class="preprocessor">#include &lt;do/make_algo_scalar.h&gt;</span>
00102 <a class="code" href="classeo_algo.html">eoAlgo&lt;Indi&gt;</a>&amp;  make_algo_scalar(eoParser&amp; _parser, <a class="code" href="classeo_state.html">eoState</a>&amp; _state, <a class="code" href="classeo_eval_func.html">eoEvalFunc&lt;Indi&gt;</a>&amp; _eval, <a class="code" href="classeo_continue.html">eoContinue&lt;Indi&gt;</a>&amp; _continue, <a class="code" href="classeo_gen_op.html">eoGenOp&lt;Indi&gt;</a>&amp; _op)
00103 {
00104   <span class="keywordflow">return</span> do_make_algo_scalar(_parser, _state, _eval, _continue, _op);
00105 }
00106 
00107 <span class="comment">// simple call to the algo. stays there for consistency reasons </span>
00108 <span class="comment">// no template for that one</span>
00109 <span class="preprocessor">#include &lt;do/make_run.h&gt;</span>
00110 <span class="comment">// the instanciating fitnesses</span>
00111 <span class="preprocessor">#include &lt;eoScalarFitness.h&gt;</span>
00112 <span class="keywordtype">void</span> run_ea(<a class="code" href="classeo_algo.html">eoAlgo&lt;Indi&gt;</a>&amp; _ga, <a class="code" href="classeo_pop.html">eoPop&lt;Indi&gt;</a>&amp; _pop)
00113 {
00114   do_run(_ga, _pop);
00115 }
00116 
00117 <span class="comment">// checks for help demand, and writes the status file</span>
00118 <span class="comment">// and make_help; in libutils</span>
00119 <span class="keywordtype">void</span> make_help(eoParser &amp; _parser);
00120 
00121 <span class="comment">// now use all of the above, + representation dependent things</span>
00122 <span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])
00123 {
00124 
00125   <span class="keywordflow">try</span>
00126   {
00127   eoParser parser(argc, argv);  <span class="comment">// for user-parameter reading</span>
00128 
00129   <a class="code" href="classeo_state.html">eoState</a> state;    <span class="comment">// keeps all things allocated</span>
00130 
00131     <span class="comment">// The fitness</span>
00133 <span class="comment"></span>   eoMyStructEvalFunc&lt;Indi&gt; plainEval<span class="comment">/* (varType  _anyVariable) */</span>;
00134    <span class="comment">// turn that object into an evaluation counter</span>
00135    <a class="code" href="classeo_eval_func_counter.html">eoEvalFuncCounter&lt;Indi&gt;</a> eval(plainEval);
00136 
00137   <span class="comment">// the genotype - through a genotype initializer</span>
00138   <a class="code" href="classeo_init.html">eoInit&lt;Indi&gt;</a>&amp; init = make_genotype(parser, state, Indi());
00139 
00140   <span class="comment">// Build the variation operator (any seq/prop construct)</span>
00141   <a class="code" href="classeo_gen_op.html">eoGenOp&lt;Indi&gt;</a>&amp; op = make_op(parser, state, init);
00142 
00143 
00145   <span class="comment">//</span>
00146   <span class="comment">// YOU SHOULD NOT NEED TO MODIFY ANYTHING BEYOND THIS POINT</span>
00147   <span class="comment">// unless you want to add specific statistics to the checkpoint</span>
00149 <span class="comment"></span>
00150   <span class="comment">// initialize the population</span>
00151   <span class="comment">// yes, this is representation indepedent once you have an eoInit</span>
00152   <a class="code" href="classeo_pop.html">eoPop&lt;Indi&gt;</a>&amp; pop   = make_pop(parser, state, init);
00153 
00154   <span class="comment">// stopping criteria</span>
00155   <a class="code" href="classeo_continue.html">eoContinue&lt;Indi&gt;</a> &amp; term = make_continue(parser, state, eval);
00156   <span class="comment">// output</span>
00157   <a class="code" href="classeo_check_point.html">eoCheckPoint&lt;Indi&gt;</a> &amp; checkpoint = make_checkpoint(parser, state, eval, term);
00158   <span class="comment">// algorithm (need the operator!)</span>
00159   <a class="code" href="classeo_algo.html">eoAlgo&lt;Indi&gt;</a>&amp; ga = make_algo_scalar(parser, state, eval, checkpoint, op);
00160 
00162 
00164   <span class="comment">// to be called AFTER all parameters have been read!!!</span>
00165   make_help(parser);
00166 
00169   <span class="comment">// evaluate intial population AFTER help and status in case it takes time</span>
00170   apply&lt;Indi&gt;(eval, pop);
00171   <span class="comment">// if you want to print it out</span>
00172 <span class="comment">//   cout &lt;&lt; "Initial Population\n";</span>
00173 <span class="comment">//   pop.sortedPrintOn(cout);</span>
00174 <span class="comment">//   cout &lt;&lt; endl;</span>
00175 
00176   run_ea(ga, pop); <span class="comment">// run the ga</span>
00177 
00178   cout &lt;&lt; <span class="stringliteral">"Final Population\n"</span>;
00179   pop.<a class="code" href="classeo_pop.html#a17">sortedPrintOn</a>(cout);
00180   cout &lt;&lt; endl;
00181 
00182   }
00183   <span class="keywordflow">catch</span>(exception&amp; e)
00184   {
00185     cout &lt;&lt; e.what() &lt;&lt; endl;
00186   }
00187   <span class="keywordflow">return</span> 0;
00188 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Oct 19 05:06:41 2006 for EO by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
