<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>EO: t-eoGenOp.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<div class="nav">
<a class="el" href="dir_000002.html">test</a></div>
<h1>t-eoGenOp.cpp</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">// -*- mode: c++; c-indent-level: 4; c++-member-init-indent: 8; comment-column: 35; -*-</span>
00002 
00003 <span class="comment">//-----------------------------------------------------------------------------</span>
00004 <span class="comment">// eoGenOp.cpp</span>
00005 <span class="comment">// (c) Maarten Keijzer and Marc Schoenauer, 2001</span>
00006 <span class="comment">/*</span>
00007 <span class="comment">    This library is free software; you can redistribute it and/or</span>
00008 <span class="comment">    modify it under the terms of the GNU Lesser General Public</span>
00009 <span class="comment">    License as published by the Free Software Foundation; either</span>
00010 <span class="comment">    version 2 of the License, or (at your option) any later version.</span>
00011 <span class="comment"></span>
00012 <span class="comment">    This library is distributed in the hope that it will be useful,</span>
00013 <span class="comment">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00014 <span class="comment">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
00015 <span class="comment">    Lesser General Public License for more details.</span>
00016 <span class="comment"></span>
00017 <span class="comment">    You should have received a copy of the GNU Lesser General Public</span>
00018 <span class="comment">    License along with this library; if not, write to the Free Software</span>
00019 <span class="comment">    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
00020 <span class="comment"></span>
00021 <span class="comment">    Contact: mkeijzer@dhi.dk</span>
00022 <span class="comment">             Marc.Schoenauer@polytechnique.fr</span>
00023 <span class="comment"> */</span>
00024 <span class="comment">//-----------------------------------------------------------------------------</span>
00025 
00030 <span class="preprocessor">#include &lt;sstream&gt;</span>
00031 
00032 <span class="preprocessor">#include &lt;eo&gt;</span>
00033 <span class="preprocessor">#include &lt;eoPopulator.h&gt;</span>
00034 <span class="preprocessor">#include &lt;eoOpContainer.h&gt;</span>
00035 
00036 <span class="keyword">struct </span><a class="code" href="struct_dummy.html">Dummy</a> : <span class="keyword">public</span> <a class="code" href="class_e_o.html">EO</a>&lt;double&gt;
00037 {
00038   <span class="keyword">typedef</span> <span class="keywordtype">double</span> Type;
00039   <a class="code" href="struct_dummy.html">Dummy</a>(std::string _s=<span class="stringliteral">""</span>) : s(_s) {}
00040 
<a name="l00041"></a><a class="code" href="struct_dummy.html#a1">00041</a>   <span class="keywordtype">void</span> <a class="code" href="struct_dummy.html#a1">printOn</a>(std::ostream &amp; _os)<span class="keyword"> const</span>
00042 <span class="keyword">  </span>{
00043     <a class="code" href="class_e_o.html#z10_2">EO&lt;double&gt;::printOn</a>(_os);
00044     _os &lt;&lt; <span class="stringliteral">" - "</span> &lt;&lt; s ;
00045   }
00046 
00047   std::string s;
00048 };
00049 
00050 <span class="keyword">typedef</span> <a class="code" href="struct_dummy.html">Dummy</a> <a class="code" href="struct_dummy.html">EOT</a>;
00051 
00052 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pSize;      <span class="comment">// global to be used as marker in the fitness</span>
00053 
00054 <span class="comment">// DEFINITIONS of the eoOps</span>
00055 <span class="keyword">class </span>monop : <span class="keyword">public</span> <a class="code" href="classeo_mon_op.html">eoMonOp</a>&lt;EOT&gt;
00056 {
00057   <span class="keyword">public</span> :
00058   monop(<span class="keywordtype">char</span> * _sig){sig=_sig;}
00059     <span class="keywordtype">bool</span> <a class="code" href="classeo_u_f.html#a1">operator()</a>(EOT&amp; _eo)
00060     {
00061       _eo.<a class="code" href="struct_dummy.html#o0">s</a> = sig + <span class="stringliteral">"("</span> + _eo.<a class="code" href="struct_dummy.html#o0">s</a> + <span class="stringliteral">")"</span>;
00062       _eo.<a class="code" href="class_e_o.html#a2">fitness</a>(_eo.<a class="code" href="class_e_o.html#a2">fitness</a>()+pSize);
00063       <span class="keywordflow">return</span> <span class="keyword">false</span>;
00064     }
00065   std::string className()<span class="keyword"> const </span>{<span class="keywordflow">return</span> sig;}
00066     <span class="keyword">private</span>:
00067     std::string sig;
00068 };
00069 
00070 <span class="keyword">class </span>binop: <span class="keyword">public</span> <a class="code" href="classeo_bin_op.html">eoBinOp</a>&lt;EOT&gt;
00071 {
00072   <span class="keyword">public</span> :
00073     <span class="keywordtype">bool</span> <a class="code" href="classeo_b_f.html#a1">operator()</a>(EOT&amp; _eo1, <span class="keyword">const</span> EOT&amp; _eo2)
00074     {
00075       _eo1.<a class="code" href="struct_dummy.html#o0">s</a> = <span class="stringliteral">"bin("</span> + _eo1.<a class="code" href="struct_dummy.html#o0">s</a> + <span class="stringliteral">","</span> + _eo2.<a class="code" href="struct_dummy.html#o0">s</a> + <span class="stringliteral">")"</span>;
00076       <span class="keywordtype">double</span> f= (_eo1.<a class="code" href="class_e_o.html#a2">fitness</a>()+_eo2.<a class="code" href="class_e_o.html#a2">fitness</a>()) * pSize;
00077       _eo1.<a class="code" href="class_e_o.html#a2">fitness</a>(_eo1.<a class="code" href="class_e_o.html#a2">fitness</a>()+f);
00078       <span class="keywordflow">return</span> <span class="keyword">false</span>;
00079     }
00080   std::string className()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <span class="stringliteral">"binop"</span>;}
00081 };
00082 
00083 <span class="keyword">class </span>quadop: <span class="keyword">public</span> <a class="code" href="classeo_quad_op.html">eoQuadOp</a>&lt;EOT&gt;
00084 {
00085   <span class="keyword">public</span> :
00086   std::string className()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <span class="stringliteral">"quadop"</span>;}
00087     <span class="keywordtype">bool</span> <a class="code" href="classeo_b_f.html#a1">operator()</a>(EOT&amp; a, EOT&amp; b)
00088     {
00089       EOT oi = a;
00090       EOT oj = b;
00091 
00092       a.<a class="code" href="struct_dummy.html#o0">s</a> = <span class="stringliteral">"quad1("</span> + oi.<a class="code" href="struct_dummy.html#o0">s</a> + <span class="stringliteral">","</span> + oj.<a class="code" href="struct_dummy.html#o0">s</a> + <span class="stringliteral">")"</span>;
00093       b.<a class="code" href="struct_dummy.html#o0">s</a> = <span class="stringliteral">"quad2("</span> + oj.<a class="code" href="struct_dummy.html#o0">s</a> + <span class="stringliteral">","</span> + oi.<a class="code" href="struct_dummy.html#o0">s</a> + <span class="stringliteral">")"</span>;
00094       <span class="keywordtype">double</span> f= (a.<a class="code" href="class_e_o.html#a2">fitness</a>()+b.<a class="code" href="class_e_o.html#a2">fitness</a>()+2*pSize) * pSize;
00095       a.<a class="code" href="class_e_o.html#a2">fitness</a>(a.<a class="code" href="class_e_o.html#a2">fitness</a>()+f);
00096       b.<a class="code" href="class_e_o.html#a2">fitness</a>(b.<a class="code" href="class_e_o.html#a2">fitness</a>()+f);
00097       <span class="keywordflow">return</span> <span class="keyword">false</span>;
00098     }
00099 };
00100 <span class="comment">// an eoQuadOp that does nothing</span>
00101 <span class="keyword">class </span>quadClone: <span class="keyword">public</span> <a class="code" href="classeo_quad_op.html">eoQuadOp</a>&lt;EOT&gt;
00102 {
00103   <span class="keyword">public</span> :
00104   std::string className()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <span class="stringliteral">"quadclone"</span>;}
00105     <span class="keywordtype">bool</span> <a class="code" href="classeo_b_f.html#a1">operator()</a>(EOT&amp; , EOT&amp; ) {<span class="keywordflow">return</span> <span class="keyword">false</span>;}
00106 };
00107 
00108 <span class="comment">// User defined General Operator... adapted from Marc's example</span>
00109 
00110 <span class="keyword">class </span>one2threeOp : <span class="keyword">public</span> <a class="code" href="classeo_gen_op.html">eoGenOp</a>&lt;EOT&gt; <span class="comment">// :-)</span>
00111 {
00112   <span class="keyword">public</span>:
00113     <span class="keywordtype">unsigned</span> <a class="code" href="classeo_gen_op.html#a1">max_production</a>(<span class="keywordtype">void</span>) { <span class="keywordflow">return</span> 3; }
00114 
00115     <span class="keywordtype">void</span> <a class="code" href="classeo_gen_op.html#b0">apply</a>(<a class="code" href="classeo_populator.html">eoPopulator&lt;EOT&gt;</a>&amp; _plop)
00116     {
00117       EOT&amp; eo = *_plop; <span class="comment">// select the guy</span>
00118 
00119       ++_plop; <span class="comment">// advance</span>
00120       _plop.<a class="code" href="classeo_populator.html#a4">insert</a>(<span class="stringliteral">"v("</span> + eo.<a class="code" href="struct_dummy.html#o0">s</a> + <span class="stringliteral">", 1)"</span>);
00121       ++_plop;
00122       _plop.<a class="code" href="classeo_populator.html#a4">insert</a>(<span class="stringliteral">"v("</span> + eo.<a class="code" href="struct_dummy.html#o0">s</a> + <span class="stringliteral">", 2)"</span>);
00123       eo.<a class="code" href="struct_dummy.html#o0">s</a>  =  <span class="stringliteral">"v("</span> + eo.<a class="code" href="struct_dummy.html#o0">s</a> + <span class="stringliteral">", 0)"</span>; <span class="comment">// only now change the thing</span>
00124       <span class="comment">// oh right, and invalidate fitnesses</span>
00125     }
00126   <span class="keyword">virtual</span> std::string className()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <span class="stringliteral">"one2threeOp"</span>;}
00127 };
00128 
00129 
00130 <span class="keyword">class </span>two2oneOp : <span class="keyword">public</span> <a class="code" href="classeo_gen_op.html">eoGenOp</a>&lt;EOT&gt; <span class="comment">// :-)</span>
00131 {
00132   <span class="keyword">public</span>:
00133     <span class="keywordtype">unsigned</span> <a class="code" href="classeo_gen_op.html#a1">max_production</a>(<span class="keywordtype">void</span>) { <span class="keywordflow">return</span> 1; }
00134 
00135     <span class="keywordtype">void</span> <a class="code" href="classeo_gen_op.html#b0">apply</a>(<a class="code" href="classeo_populator.html">eoPopulator&lt;EOT&gt;</a>&amp; _plop)
00136     {
00137       EOT&amp; eo = *_plop; <span class="comment">// select the guy</span>
00138       <span class="keyword">const</span> EOT&amp; eo2 = _plop.<a class="code" href="classeo_populator.html#a11">select</a>();
00139       eo.<a class="code" href="struct_dummy.html#o0">s</a>  =  <span class="stringliteral">"221("</span> + eo.<a class="code" href="struct_dummy.html#o0">s</a> + <span class="stringliteral">", "</span> + eo2.<a class="code" href="struct_dummy.html#o0">s</a> + <span class="stringliteral">")"</span>;
00140       <span class="comment">// oh right, and invalidate fitnesses</span>
00141     }
00142   <span class="keyword">virtual</span> std::string className()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <span class="stringliteral">"two2oneOp"</span>;}
00143 };
00144 
00145 <span class="keyword">class </span>three2threeOp : <span class="keyword">public</span> <a class="code" href="classeo_gen_op.html">eoGenOp</a>&lt;EOT&gt; <span class="comment">// :-)</span>
00146 {
00147   <span class="keyword">public</span>:
00148     <span class="keywordtype">unsigned</span> <a class="code" href="classeo_gen_op.html#a1">max_production</a>(<span class="keywordtype">void</span>) { <span class="keywordflow">return</span> 3; }
00149 
00150     <span class="keywordtype">void</span> <a class="code" href="classeo_gen_op.html#b0">apply</a>(<a class="code" href="classeo_populator.html">eoPopulator&lt;EOT&gt;</a>&amp; _plop)
00151     {
00152       EOT&amp; eo1 = *_plop; <span class="comment">// select 1st guy</span>
00153       EOT&amp; eo2 = *++_plop; <span class="comment">// select 2nd guy</span>
00154       EOT&amp; eo3 = *++_plop; <span class="comment">// select 3rd guy</span>
00155       EOT a = eo1;
00156       EOT b = eo2;
00157       EOT c = eo3;
00158       std::cout &lt;&lt; <span class="stringliteral">"les selectionnes: a="</span> &lt;&lt; a &lt;&lt; <span class="stringliteral">" et b="</span> &lt;&lt; b &lt;&lt; <span class="stringliteral">" et c="</span> &lt;&lt; c &lt;&lt; std::endl;
00159       eo1.<a class="code" href="struct_dummy.html#o0">s</a>  =  <span class="stringliteral">"323-1("</span> + a.<a class="code" href="struct_dummy.html#o0">s</a> + <span class="stringliteral">", "</span> + b.<a class="code" href="struct_dummy.html#o0">s</a> + <span class="stringliteral">", "</span> + c.<a class="code" href="struct_dummy.html#o0">s</a> + <span class="stringliteral">")"</span>;
00160       eo2.<a class="code" href="struct_dummy.html#o0">s</a>  =  <span class="stringliteral">"323-2("</span> + a.<a class="code" href="struct_dummy.html#o0">s</a> + <span class="stringliteral">", "</span> + b.<a class="code" href="struct_dummy.html#o0">s</a> + <span class="stringliteral">", "</span> + c.<a class="code" href="struct_dummy.html#o0">s</a> + <span class="stringliteral">")"</span>;
00161       eo3.<a class="code" href="struct_dummy.html#o0">s</a>  =  <span class="stringliteral">"323-3("</span> + a.<a class="code" href="struct_dummy.html#o0">s</a> + <span class="stringliteral">", "</span> + b.<a class="code" href="struct_dummy.html#o0">s</a> + <span class="stringliteral">", "</span> + c.<a class="code" href="struct_dummy.html#o0">s</a> + <span class="stringliteral">")"</span>;
00162       <span class="comment">// oh right, and invalidate fitnesses</span>
00163       std::cout &lt;&lt; <span class="stringliteral">"les enfants: a="</span> &lt;&lt; eo1 &lt;&lt; <span class="stringliteral">" et b="</span> &lt;&lt; eo2 &lt;&lt; <span class="stringliteral">" et c="</span> &lt;&lt; eo3 &lt;&lt; std::endl;
00164     }
00165   <span class="keyword">virtual</span> std::string className()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <span class="stringliteral">"three2threeOp"</span>;}
00166 };
00167 
00168 
00169 <span class="comment">// dummy intialization. Re-init if no pSize, resize first if pSize</span>
00170 <span class="keywordtype">void</span> init(<a class="code" href="classeo_pop.html">eoPop&lt;Dummy&gt;</a> &amp; _pop, <span class="keywordtype">unsigned</span> _pSize)
00171 {
00172   <span class="keywordflow">if</span> (_pSize)
00173     {
00174       _pop.resize(_pSize);
00175     }
00176   <span class="keywordflow">else</span>
00177     {
00178       <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">"init pop with 0 size"</span>);
00179     }
00180   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0; i&lt;_pSize; i++)
00181     {
00182         std::ostringstream os;
00183       os &lt;&lt; i &lt;&lt; std::ends;
00184       _pop[i] = <a class="code" href="struct_dummy.html">Dummy</a>(os.str());
00185       _pop[i].fitness(i);
00186     }
00187 }
00188 
00189 <span class="comment">// ok, now for the real work</span>
00190 <span class="keywordtype">int</span> the_main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)
00191 {
00192 
00193   <a class="code" href="classeo_parser.html">eoParser</a> parser(argc, argv);
00194   <a class="code" href="classeo_value_param.html">eoValueParam&lt;unsigned int&gt;</a> parentSizeParam = parser.createParam(<span class="keywordtype">unsigned</span>(10), <span class="stringliteral">"parentSize"</span>, <span class="stringliteral">"Parent size"</span>,<span class="charliteral">'P'</span>);
00195     pSize = parentSizeParam.<a class="code" href="classeo_value_param.html#a2">value</a>(); <span class="comment">// global variable</span>
00196 
00197     <a class="code" href="classeo_value_param.html">eoValueParam&lt;uint32_t&gt;</a> seedParam(time(0), <span class="stringliteral">"seed"</span>, <span class="stringliteral">"Random number seed"</span>, <span class="charliteral">'S'</span>);
00198     parser.processParam( seedParam );
00199     eo::rng.reseed(seedParam.value());
00200 
00201    <span class="comment">// do the following AFTER ALL PARAMETERS HAVE BEEN PROCESSED</span>
00202    <span class="comment">// i.e. in case you need parameters somewhere else, postpone these</span>
00203     <span class="keywordflow">if</span> (parser.userNeedsHelp())
00204       {
00205         parser.printHelp(std::cout);
00206         exit(1);
00207       }
00208 
00210   monop mon(<span class="stringliteral">"mon1"</span>);
00211   monop clone(<span class="stringliteral">"clone"</span>);
00212   binop bin;
00213   quadop quad;
00214   quadClone quadclone;
00215 
00216   <span class="comment">// our own operator</span>
00217   one2threeOp o2t;
00218   two2oneOp t2o;
00219   three2threeOp t2t;
00220 
00221 
00222   <span class="comment">// a selector</span>
00223   <a class="code" href="classeo_det_tournament_select.html">eoDetTournamentSelect&lt;EOT&gt;</a> select;
00224   <span class="comment">// and a recognizable selector for testing the inbedded selector mechanism</span>
00225   <a class="code" href="classeo_best_select.html">eoBestSelect&lt;EOT&gt;</a> selectBest;
00226 
00227   <span class="comment">// proportional selection between quad and bin</span>
00228   <span class="comment">// so we either do a quad or a bin</span>
00229   <a class="code" href="classeo_proportional_op.html">eoProportionalOp&lt;EOT&gt;</a> pOp;
00230   pOp.<a class="code" href="classeo_op_container.html#a3">add</a>(quad, 0.1);
00231   pOp.<a class="code" href="classeo_op_container.html#a3">add</a>(bin, 0.1);
00232 
00233   <span class="comment">// sequential selection between pOp and mon</span>
00234   <a class="code" href="classeo_sequential_op.html">eoSequentialOp&lt;EOT&gt;</a> sOp;
00235   sOp.<a class="code" href="classeo_op_container.html#a3">add</a>(pOp, 0.9);
00236   sOp.<a class="code" href="classeo_op_container.html#a3">add</a>(mon, 0.1);
00237 
00238   <span class="comment">// with one2three op</span>
00239   <a class="code" href="classeo_sequential_op.html">eoSequentialOp&lt;EOT&gt;</a> sOp2;
00240   sOp2.<a class="code" href="classeo_op_container.html#a3">add</a>(o2t, 1);
00241   <span class="comment">//  sOp2.add(quad, 1);</span>
00242 
00243   <span class="comment">// with three2three op</span>
00244   <a class="code" href="classeo_sequential_op.html">eoSequentialOp&lt;EOT&gt;</a> sOp3;
00245   sOp3.<a class="code" href="classeo_op_container.html#a3">add</a>(t2t, 1);
00246 
00247 <span class="comment">//   eoSequentialOp&lt;EOT&gt; sOp3;</span>
00248 <span class="comment">//   sOp3.add(t2o, 1);</span>
00249 <span class="comment">//   sOp3.add(bin, 1);</span>
00250 <span class="comment">//   sOp3.add(quad, 1);</span>
00251   <span class="comment">// try adding quads and bins to see what results you'll get</span>
00252 
00253   <span class="comment">// now a sequential selection that is a simple "addition"</span>
00254   <a class="code" href="classeo_sequential_op.html">eoSequentialOp&lt;EOT&gt;</a> sOpQuadPlusMon;
00255   sOpQuadPlusMon.<a class="code" href="classeo_op_container.html#a3">add</a>(quad, 1);
00256   sOpQuadPlusMon.<a class="code" href="classeo_op_container.html#a3">add</a>(mon, 1);
00257 
00258   <span class="comment">// this corresponds</span>
00259   <a class="code" href="classeo_proportional_op.html">eoProportionalOp&lt;EOT&gt;</a> pOpSAGLike;
00260   pOpSAGLike.<a class="code" href="classeo_op_container.html#a3">add</a>(sOpQuadPlusMon, 0.24);
00261   pOpSAGLike.<a class="code" href="classeo_op_container.html#a3">add</a>(quad, 0.56);
00262   pOpSAGLike.<a class="code" href="classeo_op_container.html#a3">add</a>(mon, 0.06);
00263   pOpSAGLike.<a class="code" href="classeo_op_container.html#a3">add</a>(clone, 0.14);
00264 
00265   <span class="comment">// init</span>
00266   <a class="code" href="classeo_pop.html">eoPop&lt;EOT&gt;</a> pop;
00267   <a class="code" href="classeo_pop.html">eoPop&lt;EOT&gt;</a> offspring;
00268 
00269   init(pop, pSize);
00270 <span class="comment">// sort pop so seqPopulator is identical to SelectPopulator(SequentialSelect)</span>
00271   pop.<a class="code" href="classeo_pop.html#a5">sort</a>();
00272   std::cout &lt;&lt; <span class="stringliteral">"Population initiale\n"</span> &lt;&lt; pop &lt;&lt; std::endl;
00273 
00274   <span class="comment">// To simulate SGA: first a prop between quadOp and quadClone</span>
00275   <a class="code" href="classeo_proportional_op.html">eoProportionalOp&lt;EOT&gt;</a> pSGAOp;
00276   pSGAOp.<a class="code" href="classeo_op_container.html#a3">add</a>(quad, 0.8);
00277   pSGAOp.<a class="code" href="classeo_op_container.html#a3">add</a>(quadclone, 0.2);
00278   <span class="comment">// sequential selection between pSGAOp and mon</span>
00279   <a class="code" href="classeo_sequential_op.html">eoSequentialOp&lt;EOT&gt;</a> virtualSGA;
00280   virtualSGA.<a class="code" href="classeo_op_container.html#a3">add</a>(pSGAOp, 1.0);
00281   virtualSGA.<a class="code" href="classeo_op_container.html#a3">add</a>(mon, 0.3);
00282 
00283   <a class="code" href="classeo_seq_populator.html">eoSeqPopulator&lt;EOT&gt;</a> popit(pop, offspring);  <span class="comment">// no selection, a copy of pop</span>
00284 
00285   <span class="comment">// until we filled a new population</span>
00286   <span class="keywordflow">try</span>
00287     {
00288      <span class="keywordflow">while</span> (offspring.size() &lt; pop.size())
00289            {
00290              virtualSGA(popit);
00291              std::cout &lt;&lt; <span class="stringliteral">"SeqPopulator boucle et incremente\n"</span>;
00292        ++popit;
00293            }
00294     }
00295   <span class="keywordflow">catch</span>(<a class="code" href="classeo_populator.html">eoPopulator&lt;EOT&gt;</a>::OutOfIndividuals&amp;)
00296     {
00297       std::cout &lt;&lt; <span class="stringliteral">"Warning: not enough individuals to handle\n"</span>;
00298     }
00299 
00300 
00301   std::swap(pop, offspring);
00302   offspring.clear();
00303 
00304   <span class="comment">// ok, now print</span>
00305   std::cout &lt;&lt; <span class="stringliteral">"Apres virtualSGA \n"</span> &lt;&lt; pop &lt;&lt; std::endl;
00306   init(pop, pSize);
00307 
00308   std::cout &lt;&lt; <span class="stringliteral">"=========================================================\n"</span>;
00309   std::cout &lt;&lt; <span class="stringliteral">"Now the eoSelectPopulator version !"</span> &lt;&lt; std::endl;
00310 
00311   <a class="code" href="classeo_sequential_select.html">eoSequentialSelect&lt;EOT&gt;</a> seqSelect;
00312   <span class="comment">//   select.init(); should be sorted out: is it the setup method???</span>
00313   <a class="code" href="classeo_selective_populator.html">eoSelectivePopulator&lt;EOT&gt;</a> it_step3(pop, offspring, seqSelect);
00314 
00315   <span class="keywordflow">while</span> (offspring.size() &lt; 2*pop.size())
00316   {
00317     virtualSGA(it_step3);
00318              std::cout &lt;&lt; <span class="stringliteral">"SelectPopulator boucle et incremente\n"</span>;
00319     ++it_step3;
00320   }
00321 
00322   std::swap(pop, offspring);
00323   offspring.clear();
00324 
00325     <span class="comment">// ok, now print</span>
00326   std::cout &lt;&lt; <span class="stringliteral">"Apres SGA-like eoSelectivePopulator\n"</span> &lt;&lt; pop &lt;&lt; std::endl;
00327 
00328   std::cout &lt;&lt; <span class="stringliteral">"=========================================================\n"</span>;
00329   std::cout &lt;&lt; <span class="stringliteral">"Now the pure addition !"</span> &lt;&lt; std::endl;
00330 
00331   init(pop, pSize);
00332   <a class="code" href="classeo_selective_populator.html">eoSelectivePopulator&lt;EOT&gt;</a> it_step4(pop, offspring, seqSelect);
00333   <span class="keywordflow">while</span> (offspring.size() &lt; 2*pop.size())
00334   {
00335     sOpQuadPlusMon(it_step4);
00336     ++it_step4;
00337   }
00338 
00339   std::swap(pop, offspring);
00340   offspring.clear();
00341 
00342     <span class="comment">// ok, now print</span>
00343   std::cout &lt;&lt; <span class="stringliteral">"Apres Quad+Mon ds un eoSelectivePopulator\n"</span> &lt;&lt; pop &lt;&lt; std::endl;
00344 
00345   <span class="comment">// On teste 1-&gt;3</span>
00346   init(pop, pSize);
00347   <a class="code" href="classeo_selective_populator.html">eoSelectivePopulator&lt;EOT&gt;</a> it_step5(pop, offspring, seqSelect);
00348   <span class="keywordflow">while</span> (offspring.size() &lt; 2*pop.size())
00349   {
00350     sOp2(it_step5);
00351     ++it_step5;
00352   }
00353 
00354   std::swap(pop, offspring);
00355   offspring.clear();
00356 
00357     <span class="comment">// ok, now print</span>
00358   std::cout &lt;&lt; <span class="stringliteral">"Apres 1-&gt;3 seul ds un eoSelectivePopulator\n"</span> &lt;&lt; pop &lt;&lt; std::endl;
00359 
00360   <span class="comment">// On teste 3-&gt;3</span>
00361   init(pop, pSize);
00362   <a class="code" href="classeo_selective_populator.html">eoSelectivePopulator&lt;EOT&gt;</a> it_step6(pop, offspring, seqSelect);
00363   <span class="keywordflow">while</span> (offspring.size() &lt; 2*pop.size())
00364   {
00365     sOp3(it_step6);
00366     ++it_step6;
00367   }
00368 
00369   std::swap(pop, offspring);
00370   offspring.clear();
00371 
00372     <span class="comment">// ok, now print</span>
00373   std::cout &lt;&lt; <span class="stringliteral">"Apres 3-&gt;3 seul ds un eoSelectivePopulator\n"</span> &lt;&lt; pop &lt;&lt; std::endl;
00374 
00375 
00376   <span class="keywordflow">return</span> 1;
00377 }
00378 
00379 <span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)
00380 {
00381     <span class="keywordflow">try</span>
00382     {
00383         the_main(argc, argv);
00384     }
00385     <span class="keywordflow">catch</span>(std::exception&amp; e)
00386     {
00387         std::cout &lt;&lt; <span class="stringliteral">"Exception: "</span> &lt;&lt; e.what() &lt;&lt; std::endl;
00388     }
00389 
00390 }
00391 
00392 <span class="comment">/*</span>
00393 <span class="comment">If you want to build an SGA, you will need a copying quad op:</span>
00394 <span class="comment"></span>
00395 <span class="comment">class quadclone : ...</span>
00396 <span class="comment">{</span>
00397 <span class="comment">  operator(EOT&amp; a, EOT&amp; b)</span>
00398 <span class="comment">  {</span>
00399 <span class="comment">    // do nothing</span>
00400 <span class="comment">  }</span>
00401 <span class="comment"></span>
00402 <span class="comment">}</span>
00403 <span class="comment"></span>
00404 <span class="comment">Then the SGA operator will look like:</span>
00405 <span class="comment"></span>
00406 <span class="comment">quadop quad;</span>
00407 <span class="comment">guadclone clone;</span>
00408 <span class="comment"></span>
00409 <span class="comment">ProportionalGenOp pOp;</span>
00410 <span class="comment">pOp.add(quad, 0.8);</span>
00411 <span class="comment">pOp.add(clone, 0.2); // so 80% xover rate</span>
00412 <span class="comment"></span>
00413 <span class="comment">SequentialGenOp sOp;</span>
00414 <span class="comment">sOp.add(pOp, 1,0); // always try a xover (clone 20%)</span>
00415 <span class="comment">sOp.add(mut, 0.1); // low mutation rate</span>
00416 <span class="comment"></span>
00417 <span class="comment">will result in an algorithm with:</span>
00418 <span class="comment"></span>
00419 <span class="comment">p_xover = 0.8</span>
00420 <span class="comment">p_mut   = 0.1;</span>
00421 <span class="comment"></span>
00422 <span class="comment">p_reproduction = 0.2 * 0.9 = 0.18</span>
00423 <span class="comment"></span>
00424 <span class="comment">this does not add up to 1 because xover and mutation can be applied to a single indi</span>
00425 <span class="comment"></span>
00426 <span class="comment">So what do you think?</span>
00427 <span class="comment"></span>
00428 <span class="comment">*/</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Oct 19 05:06:43 2006 for EO by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
