<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>EO: t-eoStateAndParser.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<div class="nav">
<a class="el" href="dir_000002.html">test</a></div>
<h1>t-eoStateAndParser.cpp</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">//-----------------------------------------------------------------------------</span>
00002 
00003 <span class="comment">// to avoid long name warnings</span>
00004 <span class="preprocessor">#ifdef _MSC_VER</span>
00005 <span class="preprocessor"></span><span class="preprocessor">#pragma warning(disable:4786)</span>
00006 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00007 <span class="preprocessor"></span>
00008 <span class="preprocessor">#include &lt;stdexcept&gt;</span>  <span class="comment">// runtime_error</span>
00009 
00010 <span class="comment">//-----------------------------------------------------------------------------</span>
00011 <span class="comment">// tt.cpp:</span>
00012 <span class="comment">//</span>
00013 <span class="comment">//-----------------------------------------------------------------------------</span>
00014 
00015 
00016 <span class="comment">// general</span>
00017 <span class="preprocessor">#include &lt;utils/eoRNG.h&gt;</span>                <span class="comment">// Random number generators</span>
00018 <span class="preprocessor">#include &lt;ga.h&gt;</span>
00019 <span class="preprocessor">#include &lt;utils/eoParser.h&gt;</span>
00020 <span class="preprocessor">#include &lt;utils/eoState.h&gt;</span>
00021 
00022 <span class="comment">//-----------------------------------------------------------------------------</span>
00023 
00024 <span class="comment">// include package checkpointing</span>
00025 <span class="preprocessor">#include &lt;utils/checkpointing&gt;</span>
00026 <span class="comment">// and provisions for Bounds reading</span>
00027 <span class="preprocessor">#include &lt;utils/eoRealVectorBounds.h&gt;</span>
00028 
00029 <span class="keyword">struct </span><a class="code" href="struct_dummy.html">Dummy</a> : <span class="keyword">public</span> <a class="code" href="class_e_o.html">EO</a>&lt;double&gt;
00030 {
00031     <span class="keyword">typedef</span> <span class="keywordtype">double</span> Type;
00032 };
00033 
00034 
00035 <span class="comment">//-----------------------------------------------------------------------------</span>
00036 
00037 <span class="keywordtype">int</span> the_main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)
00038 { <span class="comment">// ok, we have a command line parser and a state</span>
00039 
00040     <span class="keyword">typedef</span> <a class="code" href="classeo_bit.html">eoBit&lt;float&gt;</a> Chrom;
00041 
00042     <a class="code" href="classeo_parser.html">eoParser</a> parser(argc, argv);
00043 
00044     <span class="comment">// Define Parameters</span>
00045     <a class="code" href="classeo_value_param.html">eoValueParam&lt;unsigned int&gt;</a> dimParam((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)(5), <span class="stringliteral">"dimension"</span>, <span class="stringliteral">"dimension"</span>);
00046     <a class="code" href="classeo_value_param.html">eoValueParam&lt;double&gt;</a> rate(0.01, <span class="stringliteral">"mutationRatePerBit"</span>, <span class="stringliteral">"Initial value for mutation rate per bit"</span>);
00047     <a class="code" href="classeo_value_param.html">eoValueParam&lt;double&gt;</a> factor(0.99, <span class="stringliteral">"mutationFactor"</span>, <span class="stringliteral">"Decrease factor for mutation rate"</span>);
00048     <a class="code" href="classeo_value_param.html">eoValueParam&lt;uint32_t&gt;</a> seed(time(0), <span class="stringliteral">"seed"</span>, <span class="stringliteral">"Random number seed"</span>);
00049     <span class="comment">// test if user entered or if default value used</span>
00050     <span class="keywordflow">if</span> (parser.isItThere(seed))
00051       std::cout &lt;&lt; <span class="stringliteral">"YES\n"</span>;
00052     <span class="keywordflow">else</span>
00053       std::cout &lt;&lt; <span class="stringliteral">"NO\n"</span>;
00054 
00055     <a class="code" href="classeo_value_param.html">eoValueParam&lt;std::string&gt;</a> load_name(<span class="stringliteral">""</span>, <span class="stringliteral">"Load"</span>,<span class="stringliteral">"Load"</span>,<span class="charliteral">'L'</span>);
00056     <a class="code" href="classeo_value_param.html">eoValueParam&lt;std::string&gt;</a> save_name(<span class="stringliteral">""</span>, <span class="stringliteral">"Save"</span>,<span class="stringliteral">"Save"</span>,<span class="charliteral">'S'</span>);
00057 
00058 
00059     <span class="comment">// Register them</span>
00060     parser.processParam(dimParam,   <span class="stringliteral">"Genetic Operators"</span>);
00061     parser.processParam(rate,       <span class="stringliteral">"Genetic Operators"</span>);
00062     parser.processParam(factor,     <span class="stringliteral">"Genetic Operators"</span>);
00063     parser.processParam(load_name,  <span class="stringliteral">"Persistence"</span>);
00064     parser.processParam(save_name,  <span class="stringliteral">"Persistence"</span>);
00065     parser.processParam(seed,       <span class="stringliteral">"Rng seeding"</span>);
00066 
00067     <span class="comment">// a bound param (need dim)</span>
00068     <a class="code" href="classeo_value_param.html">eoValueParam&lt;eoRealVectorBounds&gt;</a> boundParam(<a class="code" href="classeo_real_vector_bounds.html">eoRealVectorBounds</a>(dimParam.value(),eoDummyRealNoBounds), <span class="stringliteral">"bounds"</span>,<span class="stringliteral">"bounds"</span>,<span class="charliteral">'b'</span>);
00069 
00070     parser.processParam(boundParam, <span class="stringliteral">"Genetic Operators"</span>);
00071 
00072     std::cout &lt;&lt; <span class="stringliteral">"Bounds: "</span> &lt;&lt; boundParam.value() &lt;&lt; std::endl;
00073 
00074    <a class="code" href="classeo_state.html">eoState</a> state;
00075    state.<a class="code" href="classeo_state.html#a2">registerObject</a>(parser);
00076 
00077 
00078    <span class="keywordflow">if</span> (load_name.value() != <span class="stringliteral">""</span>)
00079    { <span class="comment">// load the parser. This is only neccessary when the user wants to</span>
00080      <span class="comment">// be able to change the parameters in the state file by hand.</span>
00081        state.<a class="code" href="classeo_state.html#a5">load</a>(load_name.value()); <span class="comment">// load the parser</span>
00082    }
00083 
00084     <span class="comment">// Create the algorithm here</span>
00085 
00086     <span class="comment">// Register the algorithm</span>
00087     state.<a class="code" href="classeo_state.html#a2">registerObject</a>(rng);
00088     <span class="comment">//state.registerObject(pop);</span>
00089 
00090     <span class="keywordflow">if</span> (parser.userNeedsHelp())
00091     {
00092         parser.printHelp(std::cout);
00093         <span class="keywordflow">return</span> 0;
00094     }
00095 
00096     <span class="comment">// Either load or initialize</span>
00097     <span class="keywordflow">if</span> (load_name.value() != <span class="stringliteral">""</span>)
00098     {
00099         state.<a class="code" href="classeo_state.html#a5">load</a>(load_name.value()); <span class="comment">// load the rest</span>
00100     }
00101     <span class="keywordflow">else</span>
00102     {
00103         <span class="comment">// else</span>
00104 
00105         <span class="comment">// initialize rng and population</span>
00106 
00107         rng.<a class="code" href="classeo_rng.html#a2">reseed</a>(seed.value());
00108     }
00109 
00110     <span class="comment">// run the algorithm</span>
00111 
00112     <span class="comment">// Save when needed</span>
00113     <span class="keywordflow">if</span> (save_name.value() != <span class="stringliteral">""</span>)
00114     {
00115         std::string file_name = save_name.value();
00116         save_name.value() = <span class="stringliteral">""</span>; <span class="comment">// so that it does not appear in the parser section of the state file</span>
00117         state.<a class="code" href="classeo_state.html#a7">save</a>(file_name);
00118     }
00119 
00120     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 100; ++i)
00121         rng.<a class="code" href="classeo_rng.html#a11">rand</a>();
00122 
00123     std::cout &lt;&lt; <span class="stringliteral">"a random number is "</span> &lt;&lt; rng.<a class="code" href="classeo_rng.html#a5">random</a>(1024) &lt;&lt; std::endl;;
00124 
00125     <span class="keywordflow">return</span> 1;
00126 }
00127 
00128 <span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)
00129 {
00130     <span class="keywordflow">try</span>
00131     {
00132         the_main(argc, argv);
00133     }
00134     <span class="keywordflow">catch</span>(std::exception&amp; e)
00135     {
00136         std::cout &lt;&lt; <span class="stringliteral">"Exception: "</span> &lt;&lt; e.what() &lt;&lt; std::endl;
00137     }
00138 
00139 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Oct 19 05:06:44 2006 for EO by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
