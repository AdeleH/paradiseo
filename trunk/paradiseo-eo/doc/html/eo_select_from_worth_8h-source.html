<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>EO: eoSelectFromWorth.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<div class="nav">
<a class="el" href="dir_000000.html">src</a></div>
<h1>eoSelectFromWorth.h</h1><div class="fragment"><pre class="fragment">00001 
00024 <span class="comment">//-----------------------------------------------------------------------------</span>
00025 
00026 <span class="preprocessor">#ifndef _eoSelectFromWorth_h</span>
00027 <span class="preprocessor"></span><span class="preprocessor">#define _eoSelectFromWorth_h</span>
00028 <span class="preprocessor"></span>
00029 <span class="preprocessor">#include &lt;iostream&gt;</span>
00030 <span class="comment">//-----------------------------------------------------------------------------</span>
00031 <span class="preprocessor">#include &lt;eoSelectOne.h&gt;</span>
00032 <span class="preprocessor">#include &lt;eoPerf2Worth.h&gt;</span>
00033 <span class="preprocessor">#include &lt;utils/selectors.h&gt;</span>
00034 <span class="comment">//-----------------------------------------------------------------------------</span>
00035 
00050 <span class="keyword">template</span> &lt;<span class="keyword">class</span> EOT, <span class="keyword">class</span> WorthType = <span class="keywordtype">double</span>&gt;
<a name="l00051"></a><a class="code" href="classeo_select_from_worth.html">00051</a> <span class="keyword">class </span><a class="code" href="classeo_select_from_worth.html">eoSelectFromWorth</a> : <span class="keyword">public</span> <a class="code" href="classeo_select_one.html">eoSelectOne</a>&lt;EOT&gt;
00052 {
00053 <span class="keyword">public</span>:
00054 
00055     <span class="comment">/* Default ctor from an eoPerf2Worth object */</span>
00056     <a class="code" href="classeo_select_from_worth.html">eoSelectFromWorth</a>(<a class="code" href="classeo_perf2_worth.html">eoPerf2Worth&lt;EOT, WorthType&gt;</a>&amp; _perf2Worth)
00057         : perf2Worth(_perf2Worth)
00058         {}
00059 
00060     <span class="comment">/* setup the worthes */</span>
<a name="l00061"></a><a class="code" href="classeo_select_from_worth.html#a1">00061</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classeo_select_from_worth.html#a1">setup</a>(<span class="keyword">const</span> <a class="code" href="classeo_pop.html">eoPop&lt;EOT&gt;</a>&amp; pop) {
00062         perf2Worth(pop);
00063 <span class="preprocessor">#ifndef NDEBUG</span>
00064 <span class="preprocessor"></span>        fitness.<a class="code" href="classeo_perf2_worth.html#a2">resize</a>(pop.size());
00065         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; pop.size(); ++i) {
00066             fitness[i] = pop[i].fitness();
00067         }
00068 <span class="preprocessor">#endif</span>
00069 <span class="preprocessor"></span>    }
00070 
00071 
00072 <span class="keyword">protected</span>:
00073 
00074     <a class="code" href="classeo_perf2_worth.html">eoPerf2Worth&lt;EOT, WorthType&gt;</a>&amp; perf2Worth;
00075 
00076 <span class="preprocessor">#ifndef NDEBUG</span>
00077 <span class="preprocessor"></span>    std::vector&lt;typename EOT::Fitness&gt; fitness;
00078     <span class="keywordtype">void</span> check_sync(<span class="keywordtype">unsigned</span> index, <span class="keyword">const</span> <a class="code" href="struct_dummy.html">EOT</a>&amp; _eo) {
00079         <span class="keywordflow">if</span> (fitness[index] != _eo.<a class="code" href="class_e_o.html#a2">fitness</a>()) {
00080             <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">"eoSelectFromWorth: fitnesses are not in sync"</span>);
00081         }
00082     }
00083 <span class="preprocessor">#endif</span>
00084 <span class="preprocessor"></span>};
00085 
00086 
00090 <span class="keyword">template</span> &lt;<span class="keyword">class</span> EOT, <span class="keyword">class</span> WorthT = <span class="keywordtype">double</span>&gt;
<a name="l00091"></a><a class="code" href="classeo_det_tournament_worth_select.html">00091</a> <span class="keyword">class </span><a class="code" href="classeo_det_tournament_worth_select.html">eoDetTournamentWorthSelect</a> : <span class="keyword">public</span> <a class="code" href="classeo_select_from_worth.html">eoSelectFromWorth</a>&lt;EOT, WorthT&gt;
00092 {
00093 <span class="keyword">public</span>:
00094 
00095     <span class="keyword">using</span> <a class="code" href="classeo_select_from_worth.html">eoSelectFromWorth&lt;EOT, WorthT&gt;</a>::perf2Worth;
00096 
00097     <span class="keyword">typedef</span> <span class="keyword">typename</span> std::vector&lt;WorthT&gt;::iterator worthIterator;
00098 
00099     <span class="comment">/* Default ctor from an eoPerf2Worth object +  tournament size */</span>
00100     <a class="code" href="classeo_det_tournament_worth_select.html">eoDetTournamentWorthSelect</a>(<a class="code" href="classeo_perf2_worth.html">eoPerf2Worth&lt;EOT, WorthT&gt;</a>&amp; perf2Worth,
00101                                <span class="keywordtype">unsigned</span> _tSize)
00102         : <a class="code" href="classeo_select_from_worth.html">eoSelectFromWorth&lt;EOT, WorthT&gt;</a>(perf2Worth), tSize(_tSize) {}
00103 
00104     <span class="comment">/* Perform deterministic tournament on worthes by calling the</span>
00105 <span class="comment">       appropriate fn see selectors.h */</span>
<a name="l00106"></a><a class="code" href="classeo_det_tournament_worth_select.html#a1">00106</a>     <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="struct_dummy.html">EOT</a>&amp; <a class="code" href="classeo_det_tournament_worth_select.html#a1">operator()</a>(<span class="keyword">const</span> <a class="code" href="classeo_pop.html">eoPop&lt;EOT&gt;</a>&amp; pop) {
00107         worthIterator it = deterministic_tournament(perf2Worth.<a class="code" href="classeo_value_param.html#a2">value</a>().begin(),
00108                                                     perf2Worth.<a class="code" href="classeo_value_param.html#a2">value</a>().end(),
00109                                                     tSize);
00110         <span class="keywordtype">unsigned</span> index = it - perf2Worth.<a class="code" href="classeo_value_param.html#a2">value</a>().begin();
00111 <span class="preprocessor">#ifndef NDEBUG</span>
00112 <span class="preprocessor"></span>        <span class="comment">// check whether the stuff is still in sync</span>
00113         check_sync(index, pop[index]);
00114 <span class="preprocessor">#endif</span>
00115 <span class="preprocessor"></span>        <span class="keywordflow">return</span> pop[index];
00116     }
00117 
00118 
00119 <span class="keyword">private</span>:
00120 
00121     <span class="keywordtype">unsigned</span> tSize;
00122 };
00123 
00127 <span class="keyword">template</span> &lt;<span class="keyword">class</span> EOT, <span class="keyword">class</span> WorthT = <span class="keywordtype">double</span>&gt;
<a name="l00128"></a><a class="code" href="classeo_stoch_tournament_worth_select.html">00128</a> <span class="keyword">class </span><a class="code" href="classeo_stoch_tournament_worth_select.html">eoStochTournamentWorthSelect</a> : <span class="keyword">public</span> <a class="code" href="classeo_select_from_worth.html">eoSelectFromWorth</a>&lt;EOT, WorthT&gt;
00129 {
00130 <span class="keyword">public</span>:
00131 
00132     <span class="keyword">using</span> <a class="code" href="classeo_select_from_worth.html">eoSelectFromWorth&lt;EOT, WorthT&gt;</a>::perf2Worth;
00133 
00134     <span class="keyword">typedef</span> <span class="keyword">typename</span> std::vector&lt;WorthT&gt;::iterator worthIterator;
00135 
00136     <span class="comment">/* Default ctor from an eoPerf2Worth object +  tournament rate */</span>
00137     <a class="code" href="classeo_stoch_tournament_worth_select.html">eoStochTournamentWorthSelect</a>(<a class="code" href="classeo_perf2_worth.html">eoPerf2Worth&lt;EOT, WorthT&gt;</a> &amp;_perf2Worth, <span class="keywordtype">double</span> _tRate)
00138         : <a class="code" href="classeo_select_from_worth.html">eoSelectFromWorth&lt;EOT, WorthT&gt;</a>(_perf2Worth), tRate(_tRate)
00139         {}
00140 
00141   <span class="comment">/* Perform stochastic tournament on worthes</span>
00142 <span class="comment">     by calling the appropriate fn in selectors.h</span>
00143 <span class="comment">  */</span>
<a name="l00144"></a><a class="code" href="classeo_stoch_tournament_worth_select.html#a1">00144</a>   <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="struct_dummy.html">EOT</a>&amp; <a class="code" href="classeo_stoch_tournament_worth_select.html#a1">operator()</a>(<span class="keyword">const</span> <a class="code" href="classeo_pop.html">eoPop&lt;EOT&gt;</a>&amp; _pop) {
00145       worthIterator it = stochastic_tournament(perf2Worth.value().begin(),
00146                                                perf2Worth.value().end(),
00147                                                tRate);
00148 
00149     <span class="keywordtype">unsigned</span> index = it - perf2Worth.value().begin();
00150 
00151 <span class="preprocessor">#ifndef NDEBUG</span>
00152 <span class="preprocessor"></span>  <span class="comment">// check whether the stuff is still in sync</span>
00153   check_sync(index, _pop[index]);
00154 <span class="preprocessor">#endif</span>
00155 <span class="preprocessor"></span>
00156     <span class="keywordflow">return</span> _pop[index];
00157   }
00158 
00159 <span class="keyword">private</span>:
00160   <span class="keywordtype">double</span> tRate;
00161 };
00162 
00166 <span class="keyword">template</span> &lt;<span class="keyword">class</span> EOT, <span class="keyword">class</span> WorthT = <span class="keywordtype">double</span>&gt;
<a name="l00167"></a><a class="code" href="classeo_roulette_worth_select.html">00167</a> <span class="keyword">class </span><a class="code" href="classeo_roulette_worth_select.html">eoRouletteWorthSelect</a> : <span class="keyword">public</span> <a class="code" href="classeo_select_from_worth.html">eoSelectFromWorth</a>&lt;EOT, WorthT&gt;
00168 {
00169 <span class="keyword">public</span>:
00170 
00171     <span class="keyword">using</span> <a class="code" href="classeo_select_from_worth.html">eoSelectFromWorth&lt;EOT, WorthT&gt;</a>::perf2Worth;
00172 
00173     <span class="keyword">typedef</span> <span class="keyword">typename</span> std::vector&lt;WorthT&gt;::iterator worthIterator;
00174 
00175 
00176     <span class="comment">/* Default ctor from an eoPerf2Worth object */</span>
00177     <a class="code" href="classeo_roulette_worth_select.html">eoRouletteWorthSelect</a>(<a class="code" href="classeo_perf2_worth.html">eoPerf2Worth&lt;EOT, WorthT&gt;</a> &amp;_perf2Worth)
00178         : <a class="code" href="classeo_select_from_worth.html">eoSelectFromWorth&lt;EOT, WorthT&gt;</a>(_perf2Worth)
00179         {}
00180 
00181   <span class="comment">/* We have to override the default behavior to compute the total</span>
00182 <span class="comment">   * only once!</span>
00183 <span class="comment">   */</span>
<a name="l00184"></a><a class="code" href="classeo_roulette_worth_select.html#a1">00184</a>   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classeo_roulette_worth_select.html#a1">setup</a>(<span class="keyword">const</span> <a class="code" href="classeo_pop.html">eoPop&lt;EOT&gt;</a>&amp; _pop)
00185   {
00186     <a class="code" href="classeo_select_from_worth.html#a1">eoSelectFromWorth&lt;EOT, WorthT&gt;::setup</a>(_pop);
00187     total = 0.0;
00188     <span class="keywordflow">for</span> (worthIterator it = perf2Worth.value().begin();
00189          it&lt;perf2Worth.value().end(); ++it)
00190       total += (*it);
00191   }
00192 
00193   <span class="comment">/* Perform roulette wheel on worthes</span>
00194 <span class="comment">     by calling the appropriate fn</span>
00195 <span class="comment">     see selectors.h</span>
00196 <span class="comment">  */</span>
<a name="l00197"></a><a class="code" href="classeo_roulette_worth_select.html#a2">00197</a>   <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="struct_dummy.html">EOT</a>&amp; <a class="code" href="classeo_roulette_worth_select.html#a2">operator()</a>(<span class="keyword">const</span> <a class="code" href="classeo_pop.html">eoPop&lt;EOT&gt;</a>&amp; _pop) {
00198  <span class="comment">//     cout &lt;&lt; "On affiche les worths\n";</span>
00199  <span class="comment">//     for (unsigned i=0;</span>
00200  <span class="comment">//      i&lt;perf2Worth.value().size();</span>
00201  <span class="comment">//      i++)</span>
00202  <span class="comment">//       cout &lt;&lt; perf2Worth.value().operator[](i) &lt;&lt; "\n";</span>
00203  <span class="comment">//     cout &lt;&lt; endl;</span>
00204       worthIterator it = roulette_wheel(perf2Worth.value().begin(),
00205                                         perf2Worth.value().end(),
00206                                         total);
00207 
00208    <span class="keywordtype">unsigned</span> index = it - perf2Worth.value().begin();
00209 
00210 <span class="preprocessor">#ifndef NDEBUG</span>
00211 <span class="preprocessor"></span>  <span class="comment">// check whether the stuff is still in sync</span>
00212   check_sync(index, _pop[index]);
00213 <span class="preprocessor">#endif</span>
00214 <span class="preprocessor"></span>
00215     <span class="keywordflow">return</span> _pop[index];
00216     <span class="keywordflow">return</span> _pop[it - perf2Worth.value().begin()];
00217   }
00218 
00219 <span class="keyword">private</span>:
00220   <span class="keywordtype">double</span> total;
00221 };
00222 
00223 <span class="preprocessor">#endif</span>
00224 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Oct 19 05:06:38 2006 for EO by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
