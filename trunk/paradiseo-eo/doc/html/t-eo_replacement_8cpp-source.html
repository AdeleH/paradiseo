<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>EO: t-eoReplacement.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<div class="nav">
<a class="el" href="dir_000002.html">test</a></div>
<h1>t-eoReplacement.cpp</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">//-----------------------------------------------------------------------------</span>
00002 
00003 <span class="comment">// to avoid long name warnings</span>
00004 <span class="preprocessor">#ifdef _MSC_VER</span>
00005 <span class="preprocessor"></span><span class="preprocessor">#pragma warning(disable:4786)</span>
00006 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00007 <span class="preprocessor"></span>
00008 <span class="preprocessor">#include &lt;stdexcept&gt;</span>  <span class="comment">// runtime_error </span>
00009 
00010 <span class="comment">//-----------------------------------------------------------------------------</span>
00011 <span class="comment">// tt.cpp: </span>
00012 <span class="comment">//</span>
00013 <span class="comment">//-----------------------------------------------------------------------------</span>
00014 
00015 
00016 <span class="comment">// general</span>
00017 <span class="preprocessor">#include &lt;eo&gt;</span>
00018 <span class="comment">//-----------------------------------------------------------------------------</span>
00019 
00020 <span class="keyword">struct </span><a class="code" href="struct_dummy.html">Dummy</a> : <span class="keyword">public</span> <a class="code" href="class_e_o.html">EO</a>&lt;double&gt;
00021 {
00022     <span class="keyword">typedef</span> <span class="keywordtype">double</span> Type;
<a name="l00023"></a><a class="code" href="struct_dummy.html#a2">00023</a>   <span class="keywordtype">void</span> <a class="code" href="struct_dummy.html#a1">printOn</a>(std::ostream &amp; _os)<span class="keyword"> const</span>
00024 <span class="keyword">  </span>{
00025       _os &lt;&lt; <span class="stringliteral">" - "</span>;
00026       <a class="code" href="class_e_o.html#z10_2">EO&lt;double&gt;::printOn</a>(_os);
00027   }
00028 };
00029 
00030 
00031 <span class="keyword">struct </span>eoDummyPop : <span class="keyword">public</span> <a class="code" href="classeo_pop.html">eoPop</a>&lt;Dummy&gt;
00032 {
00033 <span class="keyword">public</span> :
00034     eoDummyPop(<span class="keywordtype">int</span> s=0) { resize(s); }
00035 };
00036 
00037 <span class="comment">//-----------------------------------------------------------------------------</span>
00038 
00039 <span class="keywordtype">int</span> the_main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)
00040 { 
00041   <a class="code" href="classeo_parser.html">eoParser</a> parser(argc, argv);
00042   <a class="code" href="classeo_value_param.html">eoValueParam&lt;unsigned int&gt;</a> parentSizeParam(10, <span class="stringliteral">"parentSize"</span>, <span class="stringliteral">"Parent size"</span>,<span class="charliteral">'P'</span>);
00043   parser.processParam( parentSizeParam );
00044     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pSize = parentSizeParam.value();
00045 
00046   <a class="code" href="classeo_value_param.html">eoValueParam&lt;unsigned int&gt;</a> offsrpringSizeParam(10, <span class="stringliteral">"offsrpringSize"</span>, <span class="stringliteral">"Offsrpring size"</span>,<span class="charliteral">'O'</span>);
00047   parser.processParam( offsrpringSizeParam );
00048     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> oSize = offsrpringSizeParam.value();
00049 
00050   <a class="code" href="classeo_value_param.html">eoValueParam&lt;unsigned int&gt;</a> tournamentSizeParam(2, <span class="stringliteral">"tournamentSize"</span>, <span class="stringliteral">"Deterministic tournament size"</span>,<span class="charliteral">'T'</span>);
00051   parser.processParam( tournamentSizeParam );
00052     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> tSize = tournamentSizeParam.value();
00053 
00054   <a class="code" href="classeo_value_param.html">eoValueParam&lt;double&gt;</a> tournamentRateParam(0.75, <span class="stringliteral">"tournamentRate"</span>, <span class="stringliteral">"Stochastic tournament rate"</span>,<span class="charliteral">'R'</span>);
00055   parser.processParam( tournamentRateParam );
00056     <span class="keywordtype">double</span> tRate = tournamentRateParam.value();
00057 
00058   <a class="code" href="classeo_value_param.html">eoValueParam&lt;double&gt;</a> sParentsElitismRateParam(0.1, <span class="stringliteral">"sParentsElitismRateParam"</span>, <span class="stringliteral">"Strong elitism rate for parents"</span>,<span class="charliteral">'E'</span>);
00059   parser.processParam( sParentsElitismRateParam );
00060     <span class="keywordtype">double</span> sParentsElitismRate = sParentsElitismRateParam.value();
00061 
00062   <a class="code" href="classeo_value_param.html">eoValueParam&lt;double&gt;</a> sParentsEugenismRateParam(0, <span class="stringliteral">"sParentsEugenismRateParam"</span>, <span class="stringliteral">"Strong Eugenism rate"</span>,<span class="charliteral">'e'</span>);
00063   parser.processParam( sParentsEugenismRateParam );
00064     <span class="keywordtype">double</span> sParentsEugenismRate = sParentsEugenismRateParam.value();
00065 
00066   <a class="code" href="classeo_value_param.html">eoValueParam&lt;double&gt;</a> sOffspringElitismRateParam(0, <span class="stringliteral">"sOffspringElitismRateParam"</span>, <span class="stringliteral">"Strong elitism rate for parents"</span>,<span class="charliteral">'E'</span>);
00067   parser.processParam( sOffspringElitismRateParam );
00068     <span class="keywordtype">double</span> sOffspringElitismRate = sOffspringElitismRateParam.value();
00069 
00070   <a class="code" href="classeo_value_param.html">eoValueParam&lt;double&gt;</a> sOffspringEugenismRateParam(0, <span class="stringliteral">"sOffspringEugenismRateParam"</span>, <span class="stringliteral">"Strong Eugenism rate"</span>,<span class="charliteral">'e'</span>);
00071   parser.processParam( sOffspringEugenismRateParam );
00072     <span class="keywordtype">double</span> sOffspringEugenismRate = sOffspringEugenismRateParam.value();
00073 
00074     <span class="keywordflow">if</span> (parser.userNeedsHelp())
00075       {
00076         parser.printHelp(std::cout);
00077         exit(1);
00078       }
00079 
00080     <span class="keywordtype">unsigned</span> i;
00081 
00082     std::cout &lt;&lt; <span class="stringliteral">"Testing the replacements\nParents SIze = "</span> &lt;&lt; pSize 
00083          &lt;&lt; <span class="stringliteral">" and offspring size = "</span> &lt;&lt; oSize &lt;&lt; std::endl;
00084 
00085     rng.<a class="code" href="classeo_rng.html#a2">reseed</a>(42);
00086 
00087 
00088     eoDummyPop orgParents(pSize);
00089     eoDummyPop orgOffspring(oSize);
00090 
00091     <span class="comment">// initialize so we can recognize them later!</span>
00092     <span class="keywordflow">for</span> (i=0; i&lt;pSize; i++)
00093       orgParents[i].fitness(2*i+1);
00094     <span class="keywordflow">for</span> (i=0; i&lt;oSize; i++)
00095       orgOffspring[i].fitness(2*i);
00096 
00097 std::cout &lt;&lt; <span class="stringliteral">"Initial parents (odd)\n"</span> &lt;&lt; orgParents &lt;&lt; <span class="stringliteral">"\n And initial offsprings (even)\n"</span> &lt;&lt; orgOffspring &lt;&lt; std::endl;
00098 
00099     <span class="comment">// now the ones we're going to play with</span>
00100     eoDummyPop parents(0);
00101     eoDummyPop offspring(0);
00102 
00103 <span class="comment">// the replacement procedures under test</span>
00104     <a class="code" href="classeo_generational_replacement.html">eoGenerationalReplacement&lt;Dummy&gt;</a> genReplace;
00105     <a class="code" href="classeo_plus_replacement.html">eoPlusReplacement&lt;Dummy&gt;</a> plusReplace;
00106     <a class="code" href="classeo_e_p_replacement.html">eoEPReplacement&lt;Dummy&gt;</a> epReplace(tSize);
00107     <a class="code" href="classeo_comma_replacement.html">eoCommaReplacement&lt;Dummy&gt;</a> commaReplace;
00108     <a class="code" href="classeo_weak_elitist_replacement.html">eoWeakElitistReplacement&lt;Dummy&gt;</a> weakElitistReplace(commaReplace);
00109     <span class="comment">// the SSGA replacements</span>
00110     <a class="code" href="classeo_s_s_g_a_worse_replacement.html">eoSSGAWorseReplacement&lt;Dummy&gt;</a> ssgaWorseReplace;
00111     <a class="code" href="classeo_s_s_g_a_det_tournament_replacement.html">eoSSGADetTournamentReplacement&lt;Dummy&gt;</a> ssgaDTReplace(tSize);
00112     <a class="code" href="classeo_s_s_g_a_stoch_tournament_replacement.html">eoSSGAStochTournamentReplacement&lt;Dummy&gt;</a> ssgaDSReplace(tRate);
00113 
00114     <span class="comment">// here we go</span>
00115     <span class="comment">// Generational</span>
00116     parents = orgParents;
00117     offspring = orgOffspring;
00118 
00119     std::cout &lt;&lt; <span class="stringliteral">"eoGenerationalReplacement\n"</span>;
00120     std::cout &lt;&lt; <span class="stringliteral">"=========================\n"</span>;
00121     genReplace(parents, offspring);
00122 std::cout &lt;&lt; <span class="stringliteral">"Parents (originally odd)\n"</span> &lt;&lt; parents &lt;&lt; <span class="stringliteral">"\n And offsprings (orogonally even\n"</span> &lt;&lt; offspring &lt;&lt; std::endl;
00123 
00124     <span class="comment">// Plus</span>
00125     parents = orgParents;
00126     offspring = orgOffspring;
00127 
00128     std::cout &lt;&lt; <span class="stringliteral">"eoPlusReplacement\n"</span>;
00129     std::cout &lt;&lt; <span class="stringliteral">"=================\n"</span>;
00130     plusReplace(parents, offspring);
00131 std::cout &lt;&lt; <span class="stringliteral">"Parents (originally odd)\n"</span> &lt;&lt; parents &lt;&lt; <span class="stringliteral">"\n And offsprings (originally even)\n"</span> &lt;&lt; offspring &lt;&lt; std::endl;
00132 
00133     <span class="comment">// EP (proche d'un PLUS</span>
00134     parents = orgParents;
00135     offspring = orgOffspring;
00136 
00137     std::cout &lt;&lt; <span class="stringliteral">"eoEPReplacement\n"</span>;
00138     std::cout &lt;&lt; <span class="stringliteral">"===============\n"</span>;
00139     epReplace(parents, offspring);
00140 std::cout &lt;&lt; <span class="stringliteral">"Parents (originally odd)\n"</span> &lt;&lt; parents &lt;&lt; <span class="stringliteral">"\n And offsprings (originally even)\n"</span> &lt;&lt; offspring &lt;&lt; std::endl;
00141 
00142     <span class="comment">// Comma</span>
00143     parents = orgParents;
00144     offspring = orgOffspring;
00145 
00146     <span class="keywordflow">if</span> (parents.size() &gt; offspring.size() )
00147         std::cout &lt;&lt; <span class="stringliteral">"Skipping Comma Replacement, more parents than offspring\n"</span>;
00148     <span class="keywordflow">else</span>
00149       {
00150         std::cout &lt;&lt; <span class="stringliteral">"eoCommaReplacement\n"</span>;
00151         std::cout &lt;&lt; <span class="stringliteral">"==================\n"</span>;
00152         commaReplace(parents, offspring);
00153         std::cout &lt;&lt; <span class="stringliteral">"Parents (originally odd)\n"</span> &lt;&lt; parents &lt;&lt; <span class="stringliteral">"\n And offsprings (originally even)\n"</span> &lt;&lt; offspring &lt;&lt; std::endl;
00154 
00155         <span class="comment">// Comma with weak elitism</span>
00156         parents = orgParents;
00157         offspring = orgOffspring;
00158 
00159         std::cout &lt;&lt; <span class="stringliteral">"The same, with WEAK elitism\n"</span>;
00160         std::cout &lt;&lt; <span class="stringliteral">"===========================\n"</span>;
00161         weakElitistReplace(parents, offspring);
00162         std::cout &lt;&lt; <span class="stringliteral">"Parents (originally odd)\n"</span> &lt;&lt; parents &lt;&lt; <span class="stringliteral">"\n And offsprings (originally even)\n"</span> &lt;&lt; offspring &lt;&lt; std::endl;
00163       }
00164 
00165         <span class="comment">// preparing SSGA replace worse</span>
00166         parents = orgParents;
00167         offspring = orgOffspring;
00168 
00169     <span class="keywordflow">if</span> (parents.size() &lt; offspring.size() )
00170         std::cout &lt;&lt; <span class="stringliteral">"Skipping all SSGA Replacements, more offspring than parents\n"</span>;
00171     <span class="keywordflow">else</span>
00172       {
00173         std::cout &lt;&lt; <span class="stringliteral">"SSGA replace worse\n"</span>;
00174         std::cout &lt;&lt; <span class="stringliteral">"==================\n"</span>;
00175         ssgaWorseReplace(parents, offspring);
00176         std::cout &lt;&lt; <span class="stringliteral">"Parents (originally odd)\n"</span> &lt;&lt; parents &lt;&lt; <span class="stringliteral">"\n And offsprings (originally even)\n"</span> &lt;&lt; offspring &lt;&lt; std::endl;
00177 
00178     <span class="comment">// SSGA deterministic tournament</span>
00179         parents = orgParents;
00180         offspring = orgOffspring;
00181 
00182         std::cout &lt;&lt; <span class="stringliteral">"SSGA deterministic tournament\n"</span>;
00183         std::cout &lt;&lt; <span class="stringliteral">"=============================\n"</span>;
00184         ssgaDTReplace(parents, offspring);
00185         std::cout &lt;&lt; <span class="stringliteral">"Parents (originally odd)\n"</span> &lt;&lt; parents &lt;&lt; <span class="stringliteral">"\n And offsprings (originally even)\n"</span> &lt;&lt; offspring &lt;&lt; std::endl;
00186 
00187     <span class="comment">// SSGA stochastic tournament</span>
00188         parents = orgParents;
00189         offspring = orgOffspring;
00190 
00191         std::cout &lt;&lt; <span class="stringliteral">"SSGA stochastic tournament\n"</span>;
00192         std::cout &lt;&lt; <span class="stringliteral">"==========================\n"</span>;
00193         ssgaDTReplace(parents, offspring);
00194         std::cout &lt;&lt; <span class="stringliteral">"Parents (originally odd)\n"</span> &lt;&lt; parents &lt;&lt; <span class="stringliteral">"\n And offsprings (originally even)\n"</span> &lt;&lt; offspring &lt;&lt; std::endl;
00195       }
00196 
00197     <span class="comment">// the general replacement</span>
00198     <a class="code" href="classeo_deterministic_sa_d_replacement.html">eoDeterministicSaDReplacement&lt;Dummy&gt;</a> sAdReplace(sParentsElitismRate, sParentsEugenismRate, sOffspringElitismRate, sOffspringEugenismRate);<span class="comment">// 10% parents survive</span>
00199 
00200     parents = orgParents;
00201     offspring = orgOffspring;
00202 
00203     std::cout &lt;&lt; <span class="stringliteral">"General - strong elitism\n"</span>;
00204     std::cout &lt;&lt; <span class="stringliteral">"========================\n"</span>;
00205     sAdReplace(parents, offspring);
00206     std::cout &lt;&lt; <span class="stringliteral">"Parents (originally odd)\n"</span> &lt;&lt; parents &lt;&lt; <span class="stringliteral">"\n And offsprings (originally even)\n"</span> &lt;&lt; offspring &lt;&lt; std::endl;
00207 
00208 
00209     <span class="keywordflow">return</span> 1;
00210 }
00211 
00212 <span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)
00213 {
00214     <span class="keywordflow">try</span>
00215     {
00216         the_main(argc, argv);
00217     }
00218     <span class="keywordflow">catch</span>(std::exception&amp; e)
00219     {
00220         std::cout &lt;&lt; <span class="stringliteral">"Exception: "</span> &lt;&lt; e.what() &lt;&lt; std::endl;
00221     }
00222 
00223 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Oct 19 05:06:43 2006 for EO by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
