<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>EO: eoParam.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<div class="nav">
<a class="el" href="dir_000000.html">src</a>&nbsp;/&nbsp;<a class="el" href="dir_000011.html">utils</a></div>
<h1>eoParam.h</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">// -*- mode: c++; c-indent-level: 4; c++-member-init-indent: 8; comment-column: 35; -*-</span>
00002 
00003 <span class="comment">//-----------------------------------------------------------------------------</span>
00004 <span class="comment">// eoParam.h</span>
00005 <span class="comment">// (c) Marc Schoenauer, Maarten Keijzer and GeNeura Team, 2000</span>
00006 <span class="comment">/*</span>
00007 <span class="comment">  This library is free software; you can redistribute it and/or</span>
00008 <span class="comment">  modify it under the terms of the GNU Lesser General Public</span>
00009 <span class="comment">  License as published by the Free Software Foundation; either</span>
00010 <span class="comment">  version 2 of the License, or (at your option) any later version.</span>
00011 <span class="comment"></span>
00012 <span class="comment">  This library is distributed in the hope that it will be useful,</span>
00013 <span class="comment">  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00014 <span class="comment">  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
00015 <span class="comment">  Lesser General Public License for more details.</span>
00016 <span class="comment"></span>
00017 <span class="comment">  You should have received a copy of the GNU Lesser General Public</span>
00018 <span class="comment">  License along with this library; if not, write to the Free Software</span>
00019 <span class="comment">  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</span>
00020 <span class="comment"></span>
00021 <span class="comment">  Contact: todos@geneura.ugr.es, http://geneura.ugr.es</span>
00022 <span class="comment">  Marc.Schoenauer@polytechnique.fr</span>
00023 <span class="comment">  mkeijzer@dhi.dk</span>
00024 <span class="comment">*/</span>
00025 <span class="comment">//-----------------------------------------------------------------------------</span>
00026 
00027 <span class="preprocessor">#ifndef eoParam_h</span>
00028 <span class="preprocessor"></span><span class="preprocessor">#define eoParam_h</span>
00029 <span class="preprocessor"></span>
00030 <span class="preprocessor">#include &lt;cmath&gt;</span>
00031 <span class="preprocessor">#include &lt;iterator&gt;</span>
00032 <span class="preprocessor">#include &lt;stdexcept&gt;</span>
00033 <span class="preprocessor">#include &lt;sstream&gt;</span>
00034 <span class="preprocessor">#include &lt;string&gt;</span>
00035 <span class="preprocessor">#include &lt;vector&gt;</span>
00036 <span class="preprocessor">#include &lt;eoScalarFitness.h&gt;</span>
00037 
00038 
<a name="l00042"></a><a class="code" href="classeo_param.html">00042</a> <span class="keyword">class </span><a class="code" href="classeo_param.html">eoParam</a>
00043 {
00044 <span class="keyword">public</span>:
00045 
<a name="l00047"></a><a class="code" href="classeo_param.html#a0">00047</a>     <a class="code" href="classeo_param.html">eoParam</a> ()
00048         : repLongName(<span class="stringliteral">""</span>), repDefault(<span class="stringliteral">""</span>), repDescription(<span class="stringliteral">""</span>),
00049           repShortHand(0), repRequired(false)
00050         {}
00051 
<a name="l00060"></a><a class="code" href="classeo_param.html#a1">00060</a>     <a class="code" href="classeo_param.html">eoParam</a> (std::string _longName, std::string _default,
00061              std::string _description, <span class="keywordtype">char</span> _shortName = 0, <span class="keywordtype">bool</span> _required = <span class="keyword">false</span>)
00062         : repLongName(_longName), repDefault(_default),
00063           repDescription(_description ),
00064           repShortHand(_shortName), repRequired( _required)
00065         {}
00066 
<a name="l00070"></a><a class="code" href="classeo_param.html#a2">00070</a>     <span class="keyword">virtual</span> ~<a class="code" href="classeo_param.html">eoParam</a> () {};
00071 
00075     <span class="keyword">virtual</span> std::string getValue () <span class="keyword">const </span>= 0;
00076 
00080     <span class="keyword">virtual</span> <span class="keywordtype">void</span> setValue(<span class="keyword">const</span> std::string&amp; _value)   = 0 ;
00081 
<a name="l00085"></a><a class="code" href="classeo_param.html#a5">00085</a>     <span class="keywordtype">char</span> shortName()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> repShortHand; };
00086 
<a name="l00090"></a><a class="code" href="classeo_param.html#a6">00090</a>     <span class="keyword">const</span> std::string&amp; longName()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> repLongName; };
00091 
<a name="l00095"></a><a class="code" href="classeo_param.html#a7">00095</a>     <span class="keyword">const</span> std::string&amp; description()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> repDescription; };
00096 
<a name="l00100"></a><a class="code" href="classeo_param.html#a8">00100</a>     <span class="keyword">const</span> std::string&amp; defValue()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> repDefault; };
00101 
<a name="l00105"></a><a class="code" href="classeo_param.html#a9">00105</a>     <span class="keywordtype">void</span> defValue( <span class="keyword">const</span> std::string&amp; str ) { repDefault = str; };
00106 
<a name="l00110"></a><a class="code" href="classeo_param.html#a10">00110</a>     <span class="keywordtype">void</span> setLongName(std::string _longName) { repLongName = _longName;}
00111 
<a name="l00115"></a><a class="code" href="classeo_param.html#a11">00115</a>     <span class="keywordtype">bool</span> required()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> repRequired; };
00116 
00117 <span class="keyword">private</span>:
00118     std::string repLongName;
00119     std::string repDefault;
00120     std::string repDescription;
00121     <span class="keywordtype">char</span> repShortHand;
00122     <span class="keywordtype">bool</span> repRequired;
00123 };
00124 
00125 
00126 
00135 <span class="keyword">template</span> &lt;<span class="keyword">class</span> ValueType&gt;
<a name="l00136"></a><a class="code" href="classeo_value_param.html">00136</a> <span class="keyword">class </span><a class="code" href="classeo_value_param.html">eoValueParam</a> : <span class="keyword">public</span> <a class="code" href="classeo_param.html">eoParam</a>
00137 {
00138 <span class="keyword">public</span> :
00139 
<a name="l00141"></a><a class="code" href="classeo_value_param.html#a0">00141</a>     <a class="code" href="classeo_value_param.html#a0">eoValueParam</a>(<span class="keywordtype">void</span>) : <a class="code" href="classeo_param.html">eoParam</a>() {}
00142 
<a name="l00151"></a><a class="code" href="classeo_value_param.html#a1">00151</a>     <a class="code" href="classeo_value_param.html#a0">eoValueParam</a>(ValueType _defaultValue,
00152                  std::string _longName,
00153                  std::string _description = <span class="stringliteral">"No description"</span>,
00154                  <span class="keywordtype">char</span> _shortHand = 0,
00155                  <span class="keywordtype">bool</span> _required = <span class="keyword">false</span>)
00156         : <a class="code" href="classeo_param.html">eoParam</a>(_longName, <span class="stringliteral">""</span>, _description, _shortHand, _required),
00157           repValue(_defaultValue)
00158         {
00159             <a class="code" href="classeo_param.html#a8">eoParam::defValue</a>(<a class="code" href="classeo_value_param.html#a4">getValue</a>());
00160         }
00161 
<a name="l00166"></a><a class="code" href="classeo_value_param.html#a2">00166</a>     ValueType&amp; <a class="code" href="classeo_value_param.html#a2">value</a>()
00167         { <span class="keywordflow">return</span> repValue; }
00168 
<a name="l00175"></a><a class="code" href="classeo_value_param.html#a3">00175</a>     <span class="keyword">const</span> ValueType&amp; <a class="code" href="classeo_value_param.html#a2">value</a>()<span class="keyword"> const</span>
00176 <span class="keyword">        </span>{ <span class="keywordflow">return</span> repValue; }
00177 
00178 
<a name="l00179"></a><a class="code" href="classeo_value_param.html#a4">00179</a>     std::string <a class="code" href="classeo_value_param.html#a4">getValue</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span>
00180 <span class="keyword">        </span>{
00181             std::ostringstream os;
00182             os &lt;&lt; repValue;
00183             <span class="keywordflow">return</span> os.str();
00184         }
00185 
00186 
<a name="l00187"></a><a class="code" href="classeo_value_param.html#a5">00187</a>     <span class="keywordtype">void</span> <a class="code" href="classeo_value_param.html#a5">setValue</a>(<span class="keyword">const</span> std::string&amp; _value)
00188         {
00189             std::istringstream is(_value);
00190             is &gt;&gt; repValue;
00191         }
00192 
00193 <span class="keyword">protected</span>:
00194 
00195     ValueType repValue;
00196 };
00197 
00198 <span class="comment">/*</span>
00199 <span class="comment">  Specialization for std::string</span>
00200 <span class="comment">*/</span>
00201 <span class="keyword">template</span> &lt;&gt;
00202 <span class="keyword">inline</span> std::string <a class="code" href="classeo_value_param.html#a4">eoValueParam&lt;std::string&gt;::getValue</a>()<span class="keyword"> const</span>
00203 <span class="keyword"></span>{
00204     <span class="keywordflow">return</span> repValue;
00205 }
00206 
00207 
00208 <span class="keyword">template</span> &lt;&gt;
00209 <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classeo_value_param.html#a5">eoValueParam&lt;bool&gt;::setValue</a>(<span class="keyword">const</span> std::string&amp; _value)
00210 {
00211     <span class="keywordflow">if</span> (_value.empty())
00212     {
00213         repValue = <span class="keyword">true</span>;
00214         <span class="keywordflow">return</span>;
00215     }
00216     std::istringstream is(_value);
00217     is &gt;&gt; repValue;
00218 }
00219 
00220 
00222 <span class="keyword">template</span> &lt;&gt;
00223 <span class="keyword">inline</span> std::string <a class="code" href="classeo_value_param.html">eoValueParam&lt;std::pair&lt;double, double&gt;</a> &gt;::getValue(void) <span class="keyword">const</span>
00224 {
00225     <span class="comment">// use own buffer as MSVC's buffer leaks!</span>
00226     std::ostringstream os;
00227     os &lt;&lt; repValue.first &lt;&lt; <span class="charliteral">' '</span> &lt;&lt; repValue.second;
00228     <span class="keywordflow">return</span> os.str();
00229 }
00230 
00232 <span class="keyword">template</span> &lt;&gt;
00233 <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classeo_value_param.html">eoValueParam&lt;std::pair&lt;double, double&gt;</a> &gt;::setValue(<span class="keyword">const</span> std::string&amp; _value)
00234 {
00235     std::istringstream is(_value);
00236     is &gt;&gt; repValue.first;
00237     is &gt;&gt; repValue.second;
00238 }
00239 
00240 <span class="comment">// The std::vector&lt;std::vector&lt;double&gt; &gt;</span>
00243 <span class="comment"></span><span class="keyword">template</span> &lt;&gt;
00244 <span class="keyword">inline</span> std::string <a class="code" href="classeo_value_param.html">eoValueParam&lt;std::vector&lt;std::vector&lt;double&gt;</a> &gt; &gt;::getValue(void) <span class="keyword">const</span>
00245 {
00246     std::ostringstream os;
00247     os &lt;&lt; repValue.size() &lt;&lt; <span class="charliteral">' '</span>;
00248     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; repValue.size(); ++i)
00249     {
00250         os &lt;&lt; repValue[i].size() &lt;&lt; <span class="charliteral">' '</span>;
00251         std::copy(repValue[i].begin(), repValue[i].end(), std::ostream_iterator&lt;double&gt;(os, <span class="stringliteral">" "</span>));
00252     }
00253     <span class="keywordflow">return</span> os.str();
00254 }
00255 
00257 <span class="keyword">template</span> &lt;&gt;
00258 <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classeo_value_param.html">eoValueParam&lt;std::vector&lt;std::vector&lt;double&gt;</a> &gt; &gt;::setValue(<span class="keyword">const</span> std::string&amp; _value)
00259 {
00260     std::istringstream is(_value);
00261     <span class="keywordtype">unsigned</span> i,j,sz;
00262     is &gt;&gt; sz;
00263     repValue.resize(sz);
00264 
00265     <span class="keywordflow">for</span> (i = 0; i &lt; repValue.size(); ++i)
00266     {
00267         <span class="keywordtype">unsigned</span> sz2;
00268         is &gt;&gt; sz2;
00269         repValue[i].resize(sz2);
00270         <span class="keywordflow">for</span> (j = 0; j &lt; sz2; ++j)
00271         {
00272             is &gt;&gt; repValue[i][j];
00273         }
00274     }
00275 }
00276 
00277 <span class="comment">// The std::vector&lt;double&gt;</span>
00280 <span class="comment"></span><span class="keyword">template</span> &lt;&gt;
00281 <span class="keyword">inline</span> std::string <a class="code" href="classeo_value_param.html">eoValueParam&lt;std::vector&lt;double&gt;</a> &gt;::getValue(void) <span class="keyword">const</span>
00282 {
00283     std::ostringstream os;
00284     os &lt;&lt; repValue.size() &lt;&lt; <span class="charliteral">' '</span>;
00285     std::copy(repValue.begin(), repValue.end(), std::ostream_iterator&lt;double&gt;(os, <span class="stringliteral">" "</span>));
00286     <span class="keywordflow">return</span> os.str();
00287 }
00288 
00290 <span class="keyword">template</span> &lt;&gt;
00291 <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classeo_value_param.html">eoValueParam&lt;std::vector&lt;double&gt;</a> &gt;::setValue(<span class="keyword">const</span> std::string&amp; _value)
00292 {
00293     std::istringstream is(_value);
00294     <span class="keywordtype">unsigned</span> sz;
00295     is &gt;&gt; sz;
00296     repValue.resize(sz);
00297     std::copy(std::istream_iterator&lt;double&gt;(is), std::istream_iterator&lt;double&gt;(), repValue.begin());
00298 }
00299 
00300 <span class="comment">// The std::vector&lt;eoMinimizingFitness&gt;</span>
00303 <span class="comment"></span><span class="keyword">template</span> &lt;&gt;
00304 <span class="keyword">inline</span> std::string <a class="code" href="classeo_value_param.html">eoValueParam&lt;std::vector&lt;eoMinimizingFitness&gt;</a> &gt;::getValue(void) <span class="keyword">const</span>
00305 {
00306     std::ostringstream os;
00307     os &lt;&lt; repValue.size() &lt;&lt; <span class="charliteral">' '</span>;
00308     std::copy(repValue.begin(), repValue.end(), std::ostream_iterator&lt;eoMinimizingFitness&gt;(os, <span class="stringliteral">" "</span>));
00309     <span class="keywordflow">return</span> os.str();
00310 }
00311 
00313 <span class="comment">// NOTE: g++ doesn support it either!!!</span>
00314 <span class="keyword">template</span> &lt;&gt;
00315 <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classeo_value_param.html">eoValueParam&lt;std::vector&lt;eoMinimizingFitness&gt;</a> &gt;::setValue(<span class="keyword">const</span> std::string&amp; _value)
00316 {
00317     std::istringstream is(_value);
00318     <span class="keywordtype">unsigned</span> sz;
00319     is &gt;&gt; sz;
00320     repValue.resize(sz);
00321     std::copy(std::istream_iterator&lt;eoMinimizingFitness&gt;(is), std::istream_iterator&lt;eoMinimizingFitness&gt;(), repValue.begin());
00322 }
00323 
00324 <span class="comment">// The std::vector&lt;const EOT*&gt;</span>
00326 <span class="comment"></span><span class="keyword">template</span> &lt;&gt;
00327 <span class="keyword">inline</span> std::string <a class="code" href="classeo_value_param.html">eoValueParam&lt;std::vector&lt;void*&gt;</a> &gt;::getValue(void) <span class="keyword">const</span>
00328 {
00329     <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">"I cannot getValue for a std::vector&lt;EOT*&gt;"</span>);
00330     <span class="keywordflow">return</span> std::string(<span class="stringliteral">""</span>);
00331 }
00332 
00333 <span class="keyword">template</span> &lt;&gt;
00334 <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classeo_value_param.html">eoValueParam&lt;std::vector&lt;void*&gt;</a> &gt;::setValue(<span class="keyword">const</span> std::string&amp;)
00335 {
00336     <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">"I cannot setValue for a std::vector&lt;EOT*&gt;"</span>);
00337     <span class="keywordflow">return</span>;
00338 }
00339 
00340 <span class="comment">/*template &lt;class ContainerType&gt;</span>
00341 <span class="comment">  class eoContainerParam : public eoParam</span>
00342 <span class="comment">  {</span>
00343 <span class="comment">  public :</span>
00344 <span class="comment">  eoContainerParam (ContainerType&amp; value, std::string _shortName, std::string _longName,</span>
00345 <span class="comment">  std::string _default,</span>
00346 <span class="comment">  std::string _description,</span>
00347 <span class="comment">  bool _required,</span>
00348 <span class="comment">  bool _change )</span>
00349 <span class="comment">  : value(_value), eoParam(_shortName, _longName, _description, _default, _required, _change)</span>
00350 <span class="comment">  {}</span>
00351 <span class="comment"></span>
00352 <span class="comment"></span>
00353 <span class="comment">  //  void setValue(const std::string &amp; _value)</span>
00354 <span class="comment">  // {</span>
00355 <span class="comment">  //     std::istd::stringstream is(_value);</span>
00356 <span class="comment">  //    copy(std::istream_iterator&lt;Container::value_type&gt;(is), std::istream_iterator&lt;Container::value_type&gt;(), back_inserter(value));</span>
00357 <span class="comment">  // }</span>
00358 <span class="comment"></span>
00359 <span class="comment">  private :</span>
00360 <span class="comment">  ContainerType&amp; value;</span>
00361 <span class="comment">  };*/</span>
00362 
<a name="l00373"></a><a class="code" href="classeo_param_param_type.html">00373</a> <span class="keyword">class </span><a class="code" href="classeo_param_param_type.html">eoParamParamType</a> : <span class="keyword">public</span> std::pair&lt;std::string,std::vector&lt;std::string&gt; &gt;
00374 {
00375 <span class="keyword">public</span>:
00376     <a class="code" href="classeo_param_param_type.html">eoParamParamType</a>(std::string _value)
00377         {
00378             readFrom(_value);
00379         }
00380 
00381     std::ostream &amp; printOn(std::ostream &amp; _os)<span class="keyword"> const</span>
00382 <span class="keyword">        </span>{
00383             _os &lt;&lt; first;
00384             <span class="keywordtype">unsigned</span> narg = second.size();
00385             <span class="keywordflow">if</span> (!narg)
00386                 <span class="keywordflow">return</span> _os;
00387 
00388             <span class="comment">// Here, we do have args</span>
00389             _os &lt;&lt; <span class="stringliteral">"("</span>;
00390             <span class="keywordflow">if</span> (narg == 1)         <span class="comment">// 1 arg only</span>
00391             {
00392                 _os &lt;&lt; second[0] &lt;&lt; <span class="stringliteral">")"</span> ;
00393                 <span class="keywordflow">return</span> _os;
00394             }
00395             <span class="comment">// and here more than 1 arg</span>
00396             <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0; i&lt;narg-1; i++)
00397                 _os &lt;&lt; second[i] &lt;&lt; <span class="stringliteral">","</span> ;
00398             _os &lt;&lt; second[narg-1] &lt;&lt; <span class="stringliteral">")"</span>;
00399             <span class="keywordflow">return</span> _os;
00400         }
00401 
00402     std::istream &amp; readFrom(std::istream &amp; _is)
00403         {
00404             std::string value;
00405             _is &gt;&gt; value;
00406             readFrom(value);
00407             <span class="keywordflow">return</span> _is;
00408         }
00409 
00410     <span class="keywordtype">void</span> readFrom(std::string &amp;  _value)
00411         {
00412             second.resize(0);              <span class="comment">// just in case</span>
00413             size_t pos = _value.find(<span class="charliteral">'('</span>);
00414             <span class="keywordflow">if</span> (pos &gt;= _value.size())      <span class="comment">// no arguments</span>
00415             {
00416                 first = _value;
00417                 <span class="keywordflow">return</span>;
00418             }
00419             <span class="comment">// so here we do have arguments</span>
00420             std::string t = _value.substr(pos+1);<span class="comment">// the arguments</span>
00421             _value.resize(pos);
00422             first = _value;    <span class="comment">// done for the keyword (NOTE: may be empty std::string!)</span>
00423 
00424             <span class="comment">// now all arguments</span>
00425             std::string delim(<span class="stringliteral">" (),"</span>);
00426             <span class="keywordflow">while</span> ( (pos=t.find_first_not_of(delim)) &lt; t.size())
00427             {
00428                 size_t posEnd = t.find_first_of(delim, pos);
00429                 std::string u = t.substr(pos,posEnd);<span class="comment">//(t, pos);</span>
00430                 <span class="comment">/*u.resize(posEnd - pos);*/</span>
00431                 second.push_back(u);
00432                 t = t.substr(posEnd+1);
00433             }
00434         }
00435 };
00436 
00437 <span class="comment">// at the moment, the following are defined in eoParser.cpp</span>
00438 std::ostream &amp; operator&lt;&lt;(std::ostream &amp; _os, <span class="keyword">const</span> <a class="code" href="classeo_param_param_type.html">eoParamParamType</a> &amp; _rate);
00439 std::istream &amp; operator&gt;&gt;(std::istream &amp; _is,  <a class="code" href="classeo_param_param_type.html">eoParamParamType</a> &amp; _rate);
00440 
00441 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Oct 19 05:06:36 2006 for EO by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
