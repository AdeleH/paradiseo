<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>EO: SecondBitEA.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<div class="nav">
<a class="el" href="dir_000003.html">tutorial</a>&nbsp;/&nbsp;<a class="el" href="dir_000005.html">Lesson3</a></div>
<h1>SecondBitEA.cpp</h1><div class="fragment"><pre class="fragment">00001 <span class="comment">//-----------------------------------------------------------------------------</span>
00002 <span class="comment">// SecondGA.cpp</span>
00003 <span class="comment">//-----------------------------------------------------------------------------</span>
00004 <span class="comment">//*</span>
00005 <span class="comment">// Same code than FirstBitEA as far as Evolutionary Computation is concerned</span>
00006 <span class="comment">// but now you learn to enter the parameters in a more flexible way</span>
00007 <span class="comment">// and to twidle the output to your preferences!</span>
00008 <span class="comment">//-----------------------------------------------------------------------------</span>
00009 <span class="preprocessor">#ifdef HAVE_CONFIG_H</span>
00010 <span class="preprocessor"></span><span class="preprocessor">#include &lt;config.h&gt;</span>
00011 <span class="preprocessor">#endif</span>
00012 <span class="preprocessor"></span>
00013 <span class="comment">// standard includes</span>
00014 <span class="preprocessor">#include &lt;fstream&gt;</span>
00015 <span class="preprocessor">#include &lt;iostream&gt;</span>   <span class="comment">// cout</span>
00016 <span class="preprocessor">#include &lt;stdexcept&gt;</span>  <span class="comment">// runtime_error</span>
00017 
00018 <span class="comment">// the general include for eo</span>
00019 <span class="preprocessor">#include &lt;eo&gt;</span>
00020 <span class="preprocessor">#include &lt;ga.h&gt;</span>
00021 
00022 <span class="comment">// Use functions from namespace std</span>
00023 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00024 
00025 <span class="comment">// EVAL</span>
00026 <span class="preprocessor">#include "binary_value.h"</span>
00027 
00028 <span class="comment">// REPRESENTATION</span>
00029 <span class="comment">//-----------------------------------------------------------------------------</span>
00030 <span class="comment">// define your genotype and fitness types</span>
00031 <span class="keyword">typedef</span> <a class="code" href="classeo_bit.html">eoBit&lt;double&gt;</a> <a class="code" href="classeo_real.html">Indi</a>;
00032 
00033 <span class="comment">// the main_function: nothing changed(!), except variable initialization</span>
00034 <span class="keywordtype">void</span> main_function(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)
00035 {
00036 <span class="comment">// PARAMETRES</span>
00037 <span class="comment">//-----------------------------------------------------------------------------</span>
00038 <span class="comment">// instead of having all values of useful parameters as constants, read them:</span>
00039 <span class="comment">// either on the command line (--option=value or -o=value)</span>
00040 <span class="comment">//     or in a parameter file (same syntax, order independent,</span>
00041 <span class="comment">//                             # = usual comment character</span>
00042 <span class="comment">//     or in the environment (TODO)</span>
00043 
00044   <span class="comment">// First define a parser from the command-line arguments</span>
00045     eoParser parser(argc, argv);
00046 
00047     <span class="comment">// For each parameter, define Parameter, read it through the parser,</span>
00048     <span class="comment">// and assign the value to the variable</span>
00049 
00050     <a class="code" href="classeo_value_param.html">eoValueParam&lt;uint32_t&gt;</a> seedParam(time(0), <span class="stringliteral">"seed"</span>, <span class="stringliteral">"Random number seed"</span>, <span class="charliteral">'S'</span>);
00051     parser.processParam( seedParam );
00052     <span class="keywordtype">unsigned</span> seed = seedParam.value();
00053 
00054    <span class="comment">// description of genotype</span>
00055     <a class="code" href="classeo_value_param.html">eoValueParam&lt;unsigned int&gt;</a> vecSizeParam(8, <span class="stringliteral">"vecSize"</span>, <span class="stringliteral">"Genotype size"</span>,<span class="charliteral">'V'</span>);
00056     parser.processParam( vecSizeParam, <span class="stringliteral">"Representation"</span> );
00057     <span class="keywordtype">unsigned</span> vecSize = vecSizeParam.value();
00058 
00059    <span class="comment">// parameters for evolution engine</span>
00060     <a class="code" href="classeo_value_param.html">eoValueParam&lt;unsigned int&gt;</a> popSizeParam(10, <span class="stringliteral">"popSize"</span>, <span class="stringliteral">"Population size"</span>,<span class="charliteral">'P'</span>);
00061     parser.processParam( popSizeParam, <span class="stringliteral">"Evolution engine"</span> );
00062     <span class="keywordtype">unsigned</span> popSize = popSizeParam.value();
00063 
00064     <a class="code" href="classeo_value_param.html">eoValueParam&lt;unsigned int&gt;</a> tSizeParam(10, <span class="stringliteral">"tSize"</span>, <span class="stringliteral">"Tournament size"</span>,<span class="charliteral">'T'</span>);
00065     parser.processParam( tSizeParam, <span class="stringliteral">"Evolution Engine"</span> );
00066     <span class="keywordtype">unsigned</span> tSize = tSizeParam.value();
00067 
00068    <span class="comment">// init and stop</span>
00069     <a class="code" href="classeo_value_param.html">eoValueParam&lt;string&gt;</a> loadNameParam(<span class="stringliteral">""</span>, <span class="stringliteral">"Load"</span>,<span class="stringliteral">"A save file to restart from"</span>,<span class="charliteral">'L'</span>);
00070     parser.processParam( loadNameParam, <span class="stringliteral">"Persistence"</span> );
00071     string loadName = loadNameParam.value();
00072 
00073     <a class="code" href="classeo_value_param.html">eoValueParam&lt;unsigned int&gt;</a> maxGenParam(100, <span class="stringliteral">"maxGen"</span>, <span class="stringliteral">"Maximum number of generations"</span>,<span class="charliteral">'G'</span>);
00074     parser.processParam( maxGenParam, <span class="stringliteral">"Stopping criterion"</span> );
00075     <span class="keywordtype">unsigned</span> maxGen = maxGenParam.value();
00076 
00077     <a class="code" href="classeo_value_param.html">eoValueParam&lt;unsigned int&gt;</a> minGenParam(100, <span class="stringliteral">"minGen"</span>, <span class="stringliteral">"Minimum number of generations"</span>,<span class="charliteral">'g'</span>);
00078     parser.processParam( minGenParam, <span class="stringliteral">"Stopping criterion"</span> );
00079     <span class="keywordtype">unsigned</span> minGen = minGenParam.value();
00080 
00081     <a class="code" href="classeo_value_param.html">eoValueParam&lt;unsigned int&gt;</a> steadyGenParam(100, <span class="stringliteral">"steadyGen"</span>, <span class="stringliteral">"Number of generations with no improvement"</span>,<span class="charliteral">'s'</span>);
00082     parser.processParam( steadyGenParam, <span class="stringliteral">"Stopping criterion"</span> );
00083     <span class="keywordtype">unsigned</span> steadyGen = steadyGenParam.value();
00084 
00085    <span class="comment">// operators probabilities at the algorithm level</span>
00086     <a class="code" href="classeo_value_param.html">eoValueParam&lt;double&gt;</a> pCrossParam(0.6, <span class="stringliteral">"pCross"</span>, <span class="stringliteral">"Probability of Crossover"</span>, <span class="charliteral">'C'</span>);
00087     parser.processParam( pCrossParam, <span class="stringliteral">"Genetic Operators"</span> );
00088     <span class="keywordtype">double</span> pCross = pCrossParam.value();
00089 
00090     <a class="code" href="classeo_value_param.html">eoValueParam&lt;double&gt;</a> pMutParam(0.1, <span class="stringliteral">"pMut"</span>, <span class="stringliteral">"Probability of Mutation"</span>, <span class="charliteral">'M'</span>);
00091     parser.processParam( pMutParam, <span class="stringliteral">"Genetic Operators"</span> );
00092     <span class="keywordtype">double</span> pMut = pMutParam.value();
00093 
00094    <span class="comment">// relative rates for crossovers</span>
00095     <a class="code" href="classeo_value_param.html">eoValueParam&lt;double&gt;</a> onePointRateParam(1, <span class="stringliteral">"onePointRate"</span>, <span class="stringliteral">"Relative rate for one point crossover"</span>, <span class="charliteral">'1'</span>);
00096     parser.processParam( onePointRateParam, <span class="stringliteral">"Genetic Operators"</span> );
00097     <span class="keywordtype">double</span> onePointRate = onePointRateParam.value();
00098 
00099     <a class="code" href="classeo_value_param.html">eoValueParam&lt;double&gt;</a> twoPointsRateParam(1, <span class="stringliteral">"twoPointRate"</span>, <span class="stringliteral">"Relative rate for two point crossover"</span>, <span class="charliteral">'2'</span>);
00100     parser.processParam( twoPointsRateParam, <span class="stringliteral">"Genetic Operators"</span> );
00101     <span class="keywordtype">double</span> twoPointsRate = twoPointsRateParam.value();
00102 
00103     <a class="code" href="classeo_value_param.html">eoValueParam&lt;double&gt;</a> uRateParam(2, <span class="stringliteral">"uRate"</span>, <span class="stringliteral">"Relative rate for uniform crossover"</span>, <span class="charliteral">'U'</span>);
00104     parser.processParam( uRateParam, <span class="stringliteral">"Genetic Operators"</span> );
00105     <span class="keywordtype">double</span> URate =  uRateParam.value();
00106 
00107    <span class="comment">// relative rates and private parameters for mutations;</span>
00108     <a class="code" href="classeo_value_param.html">eoValueParam&lt;double&gt;</a> pMutPerBitParam(0.01, <span class="stringliteral">"pMutPerBit"</span>, <span class="stringliteral">"Probability of flipping 1 bit in bit-flip mutation"</span>, <span class="charliteral">'b'</span>);
00109     parser.processParam( pMutPerBitParam, <span class="stringliteral">"Genetic Operators"</span> );
00110     <span class="keywordtype">double</span> pMutPerBit = pMutPerBitParam.value();
00111 
00112     <a class="code" href="classeo_value_param.html">eoValueParam&lt;double&gt;</a> bitFlipRateParam(0.01, <span class="stringliteral">"bitFlipRate"</span>, <span class="stringliteral">"Relative rate for bit-flip mutation"</span>, <span class="charliteral">'B'</span>);
00113     parser.processParam( bitFlipRateParam, <span class="stringliteral">"Genetic Operators"</span> );
00114     <span class="keywordtype">double</span> bitFlipRate =  bitFlipRateParam.value();
00115 
00116     <a class="code" href="classeo_value_param.html">eoValueParam&lt;double&gt;</a> oneBitRateParam(0.01, <span class="stringliteral">"oneBitRate"</span>, <span class="stringliteral">"Relative rate for deterministic bit-flip mutation"</span>, <span class="charliteral">'D'</span>);
00117     parser.processParam( oneBitRateParam, <span class="stringliteral">"Genetic Operators"</span> );
00118     <span class="keywordtype">double</span> oneBitRate = oneBitRateParam.value();
00119 
00120     <span class="comment">// the name of the "status" file where all actual parameter values will be saved</span>
00121     string str_status = parser.ProgramName() + <span class="stringliteral">".status"</span>; <span class="comment">// default value</span>
00122     <a class="code" href="classeo_value_param.html">eoValueParam&lt;string&gt;</a> statusParam(str_status.c_str(), <span class="stringliteral">"status"</span>,<span class="stringliteral">"Status file"</span>,<span class="charliteral">'S'</span>);
00123     parser.processParam( statusParam, <span class="stringliteral">"Persistence"</span> );
00124 
00125    <span class="comment">// do the following AFTER ALL PARAMETERS HAVE BEEN PROCESSED</span>
00126    <span class="comment">// i.e. in case you need parameters somewhere else, postpone these</span>
00127     <span class="keywordflow">if</span> (parser.userNeedsHelp())
00128       {
00129         parser.printHelp(cout);
00130         exit(1);
00131       }
00132     <span class="keywordflow">if</span> (statusParam.value() != <span class="stringliteral">""</span>)
00133       {
00134         ofstream os(statusParam.value().c_str());
00135         os &lt;&lt; parser;           <span class="comment">// and you can use that file as parameter file</span>
00136       }
00137 
00138 <span class="comment">// EVAL</span>
00140 <span class="comment"></span>  <span class="comment">// Fitness function</span>
00142 <span class="comment"></span>  <span class="comment">// Evaluation: from a plain C++ fn to an EvalFunc Object ...</span>
00143   <a class="code" href="structeo_eval_func_ptr.html">eoEvalFuncPtr&lt;Indi, double, const vector&lt;bool&gt;</a>&amp; &gt; plainEval( binary_value );
00144   <span class="comment">// ... to an object that counts the nb of actual evaluations</span>
00145   <a class="code" href="classeo_eval_func_counter.html">eoEvalFuncCounter&lt;Indi&gt;</a> eval(plainEval);
00146 
00147 <span class="comment">// INIT</span>
00149 <span class="comment"></span>  <span class="comment">// Initilisation of population</span>
00151 <span class="comment"></span>  <span class="comment">// Either load or initialize</span>
00152   <span class="comment">// create an empty pop</span>
00153   <a class="code" href="classeo_pop.html">eoPop&lt;Indi&gt;</a> pop;
00154   <span class="comment">// create a state for reading</span>
00155   <a class="code" href="classeo_state.html">eoState</a> inState;              <span class="comment">// a state for loading - WITHOUT the parser</span>
00156   <span class="comment">// register the rng and the pop in the state, so they can be loaded,</span>
00157   <span class="comment">// and the present run will be the exact conitnuation of the saved run</span>
00158   <span class="comment">// eventually with different parameters</span>
00159   inState.<a class="code" href="classeo_state.html#a2">registerObject</a>(rng);
00160   inState.<a class="code" href="classeo_state.html#a2">registerObject</a>(pop);
00161 
00162   <span class="keywordflow">if</span> (loadName != <span class="stringliteral">""</span>)
00163     {
00164       inState.<a class="code" href="classeo_state.html#a5">load</a>(loadName); <span class="comment">//  load the pop and the rng</span>
00165       <span class="comment">// the fitness is read in the file:</span>
00166       <span class="comment">// do only evaluate the pop if the fitness has changed</span>
00167     }
00168   <span class="keywordflow">else</span>
00169     {
00170       rng.<a class="code" href="classeo_rng.html#a2">reseed</a>(seed);
00171       <span class="comment">// a Indi random initializer</span>
00172       <span class="comment">// based on boolean_generator class (see utils/rnd_generator.h)</span>
00173       <a class="code" href="classeo_uniform_generator.html">eoUniformGenerator&lt;bool&gt;</a> uGen;
00174       <a class="code" href="classeo_init_fixed_length.html">eoInitFixedLength&lt;Indi&gt;</a> random(vecSize, uGen);
00175 
00176       <span class="comment">// Init pop from the randomizer: need to use the append function</span>
00177       pop.<a class="code" href="classeo_pop.html#a2">append</a>(popSize, random);
00178       <span class="comment">// and evaluate pop (STL syntax)</span>
00179       apply&lt;Indi&gt;(eval, pop);
00180     } <span class="comment">// end of initializatio of the population</span>
00181 
00182 <span class="comment">// OUTPUT</span>
00183   <span class="comment">// sort pop for pretty printout</span>
00184   pop.<a class="code" href="classeo_pop.html#a5">sort</a>();
00185   <span class="comment">// Print (sorted) intial population (raw printout)</span>
00186   cout &lt;&lt; <span class="stringliteral">"Initial Population"</span> &lt;&lt; endl &lt;&lt; pop &lt;&lt; endl;
00187 
00188 <span class="comment">// ENGINE</span>
00190 <span class="comment"></span>  <span class="comment">// selection and replacement</span>
00192 <span class="comment"></span><span class="comment">// SELECT</span>
00193   <span class="comment">// The robust tournament selection</span>
00194   <a class="code" href="classeo_det_tournament_select.html">eoDetTournamentSelect&lt;Indi&gt;</a> selectOne(tSize);       <span class="comment">// tSize in [2,POPSIZE]</span>
00195   <span class="comment">// is now encapsulated in a eoSelectPerc (stands for Percentage)</span>
00196   <a class="code" href="classeo_select_perc.html">eoSelectPerc&lt;Indi&gt;</a> select(selectOne);
00197 
00198 <span class="comment">// REPLACE</span>
00199   <span class="comment">// And we now have the full slection/replacement - though with</span>
00200   <span class="comment">// the same generational replacement at the moment :-)</span>
00201   <a class="code" href="classeo_generational_replacement.html">eoGenerationalReplacement&lt;Indi&gt;</a> replace;
00202 
00203 <span class="comment">// OPERATORS</span>
00205 <span class="comment"></span>  <span class="comment">// The variation operators</span>
00207 <span class="comment"></span><span class="comment">// CROSSOVER</span>
00208   <span class="comment">// 1-point crossover for bitstring</span>
00209   eo1PtBitXover&lt;Indi&gt; xover1;
00210   <span class="comment">// uniform crossover for bitstring</span>
00211   <a class="code" href="classeo_u_bit_xover.html">eoUBitXover&lt;Indi&gt;</a> xoverU;
00212   <span class="comment">// 2-pots xover</span>
00213   <a class="code" href="classeo_n_pts_bit_xover.html">eoNPtsBitXover&lt;Indi&gt;</a> xover2(2);
00214   <span class="comment">// Combine them with relative rates</span>
00215   <a class="code" href="classeo_prop_combined_quad_op.html">eoPropCombinedQuadOp&lt;Indi&gt;</a> xover(xover1, onePointRate);
00216   xover.add(xoverU, URate);
00217   xover.add(xover2, twoPointsRate, <span class="keyword">true</span>);
00218 
00219 <span class="comment">// MUTATION</span>
00220   <span class="comment">// standard bit-flip mutation for bitstring</span>
00221   <a class="code" href="classeo_bit_mutation.html">eoBitMutation&lt;Indi&gt;</a>  mutationBitFlip(pMutPerBit);
00222   <span class="comment">// mutate exactly 1 bit per individual</span>
00223   <a class="code" href="classeo_det_bit_flip.html">eoDetBitFlip&lt;Indi&gt;</a> mutationOneBit;
00224   <span class="comment">// Combine them with relative rates</span>
00225   <a class="code" href="classeo_prop_combined_mon_op.html">eoPropCombinedMonOp&lt;Indi&gt;</a> mutation(mutationBitFlip, bitFlipRate);
00226   mutation.add(mutationOneBit, oneBitRate, <span class="keyword">true</span>);
00227 
00228   <span class="comment">// The operators are  encapsulated into an eoTRansform object</span>
00229   <a class="code" href="classeo_s_g_a_transform.html">eoSGATransform&lt;Indi&gt;</a> transform(xover, pCross, mutation, pMut);
00230 
00231 <span class="comment">// STOP</span>
00233 <span class="comment"></span>  <span class="comment">// termination condition see FirstBitEA.cpp</span>
00235 <span class="comment"></span>  <a class="code" href="classeo_gen_continue.html">eoGenContinue&lt;Indi&gt;</a> genCont(maxGen);
00236   <a class="code" href="classeo_steady_fit_continue.html">eoSteadyFitContinue&lt;Indi&gt;</a> steadyCont(minGen, steadyGen);
00237   <a class="code" href="classeo_fit_continue.html">eoFitContinue&lt;Indi&gt;</a> fitCont(vecSize);
00238   <a class="code" href="classeo_combined_continue.html">eoCombinedContinue&lt;Indi&gt;</a> continuator(genCont);
00239   continuator.add(steadyCont);
00240   continuator.add(fitCont);
00241 
00242 
00243 <span class="comment">// CHECKPOINT</span>
00244   <span class="comment">// but now you want to make many different things every generation</span>
00245   <span class="comment">// (e.g. statistics, plots, ...).</span>
00246   <span class="comment">// the class eoCheckPoint is dedicated to just that:</span>
00247 
00248   <span class="comment">// Declare a checkpoint (from a continuator: an eoCheckPoint</span>
00249   <span class="comment">// IS AN eoContinue and will be called in the loop of all algorithms)</span>
00250   <a class="code" href="classeo_check_point.html">eoCheckPoint&lt;Indi&gt;</a> checkpoint(continuator);
00251 
00252     <span class="comment">// Create a counter parameter</span>
00253     <a class="code" href="classeo_value_param.html">eoValueParam&lt;unsigned&gt;</a> generationCounter(0, <span class="stringliteral">"Gen."</span>);
00254 
00255     <span class="comment">// Create an incrementor (sub-class of eoUpdater). Note that the</span>
00256     <span class="comment">// parameter's value is passed by reference,</span>
00257     <span class="comment">// so every time the incrementer is updated (every generation),</span>
00258     <span class="comment">// the data in generationCounter will change.</span>
00259     <a class="code" href="classeo_incrementor.html">eoIncrementor&lt;unsigned&gt;</a> increment(generationCounter.value());
00260 
00261     <span class="comment">// Add it to the checkpoint,</span>
00262     <span class="comment">// so the counter is updated (here, incremented) every generation</span>
00263     checkpoint.add(increment);
00264 
00265     <span class="comment">// now some statistics on the population:</span>
00266     <span class="comment">// Best fitness in population</span>
00267     <a class="code" href="classeo_best_fitness_stat.html">eoBestFitnessStat&lt;Indi&gt;</a> bestStat;
00268     <span class="comment">// Second moment stats: average and stdev</span>
00269     <a class="code" href="classeo_second_moment_stats.html">eoSecondMomentStats&lt;Indi&gt;</a> SecondStat;
00270 
00271     <span class="comment">// Add them to the checkpoint to get them called at the appropriate time</span>
00272     checkpoint.add(bestStat);
00273     checkpoint.add(SecondStat);
00274 
00275     <span class="comment">// The Stdout monitor will print parameters to the screen ...</span>
00276     <a class="code" href="classeo_stdout_monitor.html">eoStdoutMonitor</a> monitor(<span class="keyword">false</span>);
00277 
00278     <span class="comment">// when called by the checkpoint (i.e. at every generation)</span>
00279     checkpoint.add(monitor);
00280 
00281     <span class="comment">// the monitor will output a series of parameters: add them</span>
00282     monitor.add(generationCounter);
00283     monitor.add(eval);          <span class="comment">// because now eval is an eoEvalFuncCounter!</span>
00284     monitor.add(bestStat);
00285     monitor.add(SecondStat);
00286 
00287     <span class="comment">// A file monitor: will print parameters to ... a File, yes, you got it!</span>
00288     <a class="code" href="classeo_file_monitor.html">eoFileMonitor</a> fileMonitor(<span class="stringliteral">"stats.xg"</span>, <span class="stringliteral">" "</span>);
00289 
00290     <span class="comment">// the checkpoint mechanism can handle multiple monitors</span>
00291     checkpoint.add(fileMonitor);
00292 
00293     <span class="comment">// the fileMonitor can monitor parameters, too, but you must tell it!</span>
00294     fileMonitor.add(generationCounter);
00295     fileMonitor.add(bestStat);
00296     fileMonitor.add(SecondStat);
00297 
00298     <span class="comment">// Last type of item the eoCheckpoint can handle: state savers:</span>
00299     <a class="code" href="classeo_state.html">eoState</a> outState;
00300     <span class="comment">// Register the algorithm into the state (so it has something to save!!)</span>
00301     outState.<a class="code" href="classeo_state.html#a2">registerObject</a>(parser);
00302     outState.<a class="code" href="classeo_state.html#a2">registerObject</a>(pop);
00303     outState.<a class="code" href="classeo_state.html#a2">registerObject</a>(rng);
00304 
00305     <span class="comment">// and feed the state to state savers</span>
00306     <span class="comment">// save state every 100th  generation</span>
00307     <a class="code" href="classeo_counted_state_saver.html">eoCountedStateSaver</a> stateSaver1(20, outState, <span class="stringliteral">"generation"</span>);
00308     <span class="comment">// save state every 1 seconds</span>
00309     <a class="code" href="classeo_timed_state_saver.html">eoTimedStateSaver</a>   stateSaver2(1, outState, <span class="stringliteral">"time"</span>);
00310 
00311     <span class="comment">// Don't forget to add the two savers to the checkpoint</span>
00312     checkpoint.add(stateSaver1);
00313     checkpoint.add(stateSaver2);
00314     <span class="comment">// and that's it for the (control and) output</span>
00315 
00316 <span class="comment">// GENERATION</span>
00318 <span class="comment"></span>  <span class="comment">// the algorithm</span>
00320 <span class="comment"></span>
00321   <span class="comment">// Easy EA requires</span>
00322   <span class="comment">// stopping criterion, eval, selection, transformation, replacement</span>
00323   <a class="code" href="classeo_easy_e_a.html">eoEasyEA&lt;Indi&gt;</a> gga(checkpoint, eval, select, transform, replace);
00324 
00325   <span class="comment">// Apply algo to pop - that's it!</span>
00326   gga(pop);
00327 
00328 <span class="comment">// OUTPUT</span>
00329   <span class="comment">// Print (sorted) intial population</span>
00330   pop.<a class="code" href="classeo_pop.html#a5">sort</a>();
00331   cout &lt;&lt; <span class="stringliteral">"FINAL Population\n"</span> &lt;&lt; pop &lt;&lt; endl;
00332 <span class="comment">// GENERAL</span>
00333 }
00334 
00335 <span class="comment">// A main that catches the exceptions</span>
00336 <span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)
00337 {
00338     <span class="keywordflow">try</span>
00339     {
00340         main_function(argc, argv);
00341     }
00342     <span class="keywordflow">catch</span>(exception&amp; e)
00343     {
00344         cout &lt;&lt; <span class="stringliteral">"Exception: "</span> &lt;&lt; e.what() &lt;&lt; <span class="charliteral">'\n'</span>;
00345     }
00346 
00347     <span class="keywordflow">return</span> 1;
00348 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Oct 19 05:06:42 2006 for EO by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
